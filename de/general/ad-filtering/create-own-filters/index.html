<!doctype html>
<html lang="de" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-general/ad-filtering/create-own-filters">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">How to create your own ad filters | AdGuard Knowledge Base</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://adguardteam.github.io/KnowledgeBase/de/general/ad-filtering/create-own-filters/"><meta data-rh="true" name="docusaurus_locale" content="de"><meta data-rh="true" name="docsearch:language" content="de"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="How to create your own ad filters | AdGuard Knowledge Base"><meta data-rh="true" name="description" content="A filter is a set of filtering rules applied to specific content, such as banners or pop-ups. AdGuard has a list of standard filters created by our team. We constantly improve and update them, striving to meet the needs of most of our users."><meta data-rh="true" property="og:description" content="A filter is a set of filtering rules applied to specific content, such as banners or pop-ups. AdGuard has a list of standard filters created by our team. We constantly improve and update them, striving to meet the needs of most of our users."><link data-rh="true" rel="icon" href="/KnowledgeBase/de/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://adguardteam.github.io/KnowledgeBase/de/general/ad-filtering/create-own-filters/"><link data-rh="true" rel="alternate" href="https://adguardteam.github.io/KnowledgeBase/general/ad-filtering/create-own-filters/" hreflang="en"><link data-rh="true" rel="alternate" href="https://adguardteam.github.io/KnowledgeBase/ru/general/ad-filtering/create-own-filters/" hreflang="ru"><link data-rh="true" rel="alternate" href="https://adguardteam.github.io/KnowledgeBase/de/general/ad-filtering/create-own-filters/" hreflang="de"><link data-rh="true" rel="alternate" href="https://adguardteam.github.io/KnowledgeBase/fr/general/ad-filtering/create-own-filters/" hreflang="fr"><link data-rh="true" rel="alternate" href="https://adguardteam.github.io/KnowledgeBase/es/general/ad-filtering/create-own-filters/" hreflang="es"><link data-rh="true" rel="alternate" href="https://adguardteam.github.io/KnowledgeBase/it/general/ad-filtering/create-own-filters/" hreflang="it"><link data-rh="true" rel="alternate" href="https://adguardteam.github.io/KnowledgeBase/ja/general/ad-filtering/create-own-filters/" hreflang="ja"><link data-rh="true" rel="alternate" href="https://adguardteam.github.io/KnowledgeBase/ko/general/ad-filtering/create-own-filters/" hreflang="ko"><link data-rh="true" rel="alternate" href="https://adguardteam.github.io/KnowledgeBase/zh-CN/general/ad-filtering/create-own-filters/" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://adguardteam.github.io/KnowledgeBase/zh-TW/general/ad-filtering/create-own-filters/" hreflang="zh-TW"><link data-rh="true" rel="alternate" href="https://adguardteam.github.io/KnowledgeBase/general/ad-filtering/create-own-filters/" hreflang="x-default"><link rel="search" type="application/opensearchdescription+xml" title="AdGuard Knowledge Base" href="/KnowledgeBase/de/opensearch.xml"><link rel="stylesheet" href="/KnowledgeBase/de/assets/css/styles.33b7b023.css">
<link rel="preload" href="/KnowledgeBase/de/assets/js/runtime~main.cc701fc0.js" as="script">
<link rel="preload" href="/KnowledgeBase/de/assets/js/main.aaa174e5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Zum Hauptinhalt springen"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Zum Hauptinhalt springen</a></div><nav class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigationsleiste umschalten" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/KnowledgeBase/de/"><div class="navbar__logo"><img src="/KnowledgeBase/de/img/logo.svg" alt="AdGuard" class="themedImage_ToTc themedImage--light_HNdA"><img src="/KnowledgeBase/de/img/logo_dark.svg" alt="AdGuard" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/KnowledgeBase/de/">Dokumente</a><a href="https://adguard.com/blog/index.html" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><a href="https://adguard.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Offizielle Website</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>Deutsch</a><ul class="dropdown__menu"><li><a href="/KnowledgeBase/general/ad-filtering/create-own-filters/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/KnowledgeBase/ru/general/ad-filtering/create-own-filters/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ru">Русский</a></li><li><a href="/KnowledgeBase/de/general/ad-filtering/create-own-filters/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="de">Deutsch</a></li><li><a href="/KnowledgeBase/fr/general/ad-filtering/create-own-filters/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="fr">Français</a></li><li><a href="/KnowledgeBase/es/general/ad-filtering/create-own-filters/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="es">Español</a></li><li><a href="/KnowledgeBase/it/general/ad-filtering/create-own-filters/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="it">Italiano</a></li><li><a href="/KnowledgeBase/ja/general/ad-filtering/create-own-filters/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ja">日本語</a></li><li><a href="/KnowledgeBase/ko/general/ad-filtering/create-own-filters/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ko">한국어</a></li><li><a href="/KnowledgeBase/zh-CN/general/ad-filtering/create-own-filters/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-CN">中文（中国）</a></li><li><a href="/KnowledgeBase/zh-TW/general/ad-filtering/create-own-filters/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-TW">中文（台灣）</a></li><li><a class="dropdown__link" href="/KnowledgeBase/de/miscellaneous/contribute/translate/program/">Help Us Translate</a></li></ul></div><a href="https://github.com/AdguardTeam/KnowledgeBase" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Zwischen dem dunklen und hellen Modus wechseln (aktuell Hellmodus
)" aria-label="Zwischen dem dunklen und hellen Modus wechseln (aktuell Hellmodus
)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Suchen"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Suchen</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Zum Seitenanfang springen" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/KnowledgeBase/de/"><img src="/KnowledgeBase/de/img/logo.svg" alt="AdGuard" class="themedImage_ToTc themedImage--light_HNdA"><img src="/KnowledgeBase/de/img/logo_dark.svg" alt="AdGuard" class="themedImage_ToTc themedImage--dark_i4oU"><b></b></a><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/KnowledgeBase/de/">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/KnowledgeBase/de/general/ad-filtering/how-ad-blocking-works/">Allgemein</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/KnowledgeBase/de/general/ad-filtering/how-ad-blocking-works/">Anzeigenfilterung</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/KnowledgeBase/de/general/ad-filtering/how-ad-blocking-works/">How ad blocking works</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/KnowledgeBase/de/general/ad-filtering/adguard-filters/">AdGuard filters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/KnowledgeBase/de/general/ad-filtering/search-ads/">Search ads and self-promotion</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/KnowledgeBase/de/general/ad-filtering/tracking-filter-statistics/">Tracking filter rules statistics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/KnowledgeBase/de/general/ad-filtering/create-own-filters/">How to create your own ad filters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/KnowledgeBase/de/general/ad-filtering/filter-policy/">AdGuard filter policy</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/KnowledgeBase/de/general/https-filtering/what-is-https-filtering/">HTTPS-Filterung</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/KnowledgeBase/de/general/browsing-security/">Browsing Security</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/KnowledgeBase/de/general/stealth-mode/">Stealth Mode</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/KnowledgeBase/de/general/userscripts/">Benutzerskripte</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/KnowledgeBase/de/general/account/register/">AdGuard-Konto</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/KnowledgeBase/de/general/license/what-is/">Lizenz</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/KnowledgeBase/de/general/how-to-install/">How to install AdGuard</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/KnowledgeBase/de/adguard-for-windows/overview/">AdGuard für Windows</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/KnowledgeBase/de/adguard-for-mac/overview/">AdGuard für Mac</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/KnowledgeBase/de/adguard-for-android/overview/">AdGuard für Android</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/KnowledgeBase/de/adguard-for-ios/overview/">AdGuard für iOS</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/KnowledgeBase/de/adguard-browser-extension/overview/">AdGuard Browsererweiterung</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/KnowledgeBase/de/adguard-for-safari/overview/">AdGuard für Safari</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/KnowledgeBase/de/adguard-content-blocker/overview/">AdGuard-Inhaltsblocker</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/KnowledgeBase/de/miscellaneous/contribute/beta-testing/">Sonstiges</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/KnowledgeBase/de/guides/collect-har-file/">Leitfäden</a></div></li></ul></nav><button type="button" title="Seitenleiste einklappen" aria-label="Seitenleiste einklappen" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Brotkrümelnavigation"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Startseite" class="breadcrumbs__link" href="/KnowledgeBase/de/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Allgemein</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Anzeigenfilterung</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">How to create your own ad filters</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">Auf dieser Seite</button></div><div class="theme-doc-markdown markdown"><header><h1>How to create your own ad filters</h1></header><p>A filter is a set of filtering rules applied to specific content, such as banners or pop-ups. AdGuard has a list of standard filters created by our team. We constantly improve and update them, striving to meet the needs of most of our users.</p><p>At the same time, AdGuard allows you to create your own custom filters using the same types of rules that we have in our filters.</p><p>To describe the syntax of our filtering rules, we use <a href="https://tools.ietf.org/html/rfc5234" target="_blank" rel="noopener noreferrer">Augmented BNF for Syntax Specifications</a>, but we do not always strictly follow this specification.</p><blockquote><p>Originally, the AdGuard&#x27;s syntax was based on the syntax of Adblock Plus rules. Later, we extended it with new types of rules for better ad filtering. Some parts of this article about the rules common both to AdGuard and ABP were taken from <a href="https://adblockplus.org/en/filters" target="_blank" rel="noopener noreferrer">this article</a>.</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="comments">Comments<a class="hash-link" href="#comments" title="Direktlink zur Überschrift">​</a></h2><p>Any line that starts with an exclamation mark is a comment. In the list of rules it is displayed in gray color. AdGuard will ignore this line, so you can write anything you want. Comments are usually placed above the rules and used to describe what a rule does.</p><p>For example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">! This is the comment. Under this line there is an actual filtering rule.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">||example.org^</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="examples">Examples<a class="hash-link" href="#examples" title="Direktlink zur Überschrift">​</a></h2><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="blocking-by-domain-name">Blocking by domain name<a class="hash-link" href="#blocking-by-domain-name" title="Direktlink zur Überschrift">​</a></h4><p><img loading="lazy" src="https://cdn.adtidy.org/public/Adguard/kb/en/rules_syntax/0_blocking_domain.svg" alt="Blocking by domain name" class="img_ev3q"></p><p><strong>This rule blocks:</strong></p><ul><li><code>http://example.org/ad1.gif</code></li><li><code>http://subdomain.example.org/ad1.gif</code></li><li><code>https://ads.example.org:8000/</code></li></ul><p><strong>This rule does not block:</strong></p><ul><li><code>http://ads.example.org.us/ad1.gif</code></li><li><code>http://example.com/redirect/http://ads.example.org/</code></li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="blocking-exact-address">Blocking exact address<a class="hash-link" href="#blocking-exact-address" title="Direktlink zur Überschrift">​</a></h4><p><img loading="lazy" src="https://cdn.adtidy.org/public/Adguard/kb/en/rules_syntax/1_exact_address.svg" alt="Blocking exact address" class="img_ev3q"></p><p><strong>This rule blocks:</strong></p><ul><li><code>http://example.org/</code></li></ul><p><strong>This rule does not block:</strong></p><ul><li><code>https://example.org/banner/img</code></li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="basic-rule-modifiers">Basic rule modifiers<a class="hash-link" href="#basic-rule-modifiers" title="Direktlink zur Überschrift">​</a></h4><p>Filtering rules support numerous modifiers that allow you to fine-tune the rule behavior. Here is an example of a rule with some simple modifiers.</p><p><img loading="lazy" src="https://cdn.adtidy.org/public/Adguard/kb/en/rules_syntax/2_basic_rule_options.svg" alt="Basic rule modifiers" class="img_ev3q"></p><p><strong>This rule blocks:</strong></p><ul><li><code>http://example.org/script.js</code> if this script is loaded from <code>example.com</code>.</li></ul><p><strong>This rule does not block:</strong></p><ul><li><code>https://example.org/script.js</code> if this script is loaded from <code>example.org</code>.</li><li><code>https://example.org/banner.png</code> because it is not a script.</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="unblocking-an-address">Unblocking an address<a class="hash-link" href="#unblocking-an-address" title="Direktlink zur Überschrift">​</a></h4><p><img loading="lazy" src="https://cdn.adtidy.org/public/Adguard/kb/en/rules_syntax/3_basic_exception.svg" class="img_ev3q"></p><p><strong>This rule unblocks:</strong></p><ul><li><code>http://example.org/banner.png</code> even if there is a blocking rule for this address.</li></ul><blockquote><p>Blocking rules with <a href="#important-modifier"><code>$important</code></a> modifier can override exceptions.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="unblocking-everything-on-a-website">Unblocking everything on a website<a class="hash-link" href="#unblocking-everything-on-a-website" title="Direktlink zur Überschrift">​</a></h4><p><img loading="lazy" src="https://cdn.adtidy.org/public/Adguard/kb/en/rules_syntax/4_unblock_entire_website.svg" alt="Unblocking everything" class="img_ev3q"></p><p><strong>This rule unblocks</strong></p><ul><li>It disables all cosmetic rules on <code>example.com</code>.</li><li>It unblocks all requests sent from this website even if there is are blocking rules matching these requests.</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cosmetic-rule">Cosmetic rule<a class="hash-link" href="#cosmetic-rule" title="Direktlink zur Überschrift">​</a></h4><p><img loading="lazy" src="https://cdn.adtidy.org/public/Adguard/kb/en/rules_syntax/5_cosmetic_rules.svg" alt="Cosmetic rule" class="img_ev3q"></p><p>Cosmetic rules are based on using a special language named CSS, which every browser understands. Basically, it adds a new CSS style to the website which purpose is to hide particular elements. You can learn more about CSS in general <a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/Introduction_to_CSS/Selectors" target="_blank" rel="noopener noreferrer">here</a>.</p><blockquote><p>AdGuard <a href="#extended-css-selectors">extends CSS</a> and lets filters developers handle much more complicated cases. However, to use these extended rules, you need to be fluent in regular CSS.</p></blockquote><p><strong>Popular CSS selectors</strong></p><table><thead><tr><th>Name</th><th>CSS selector</th><th>Description</th></tr></thead><tbody><tr><td>ID selector</td><td><code>#banners</code></td><td>Matches all elements with <code>id</code> attribute equal to <code>banners</code>.<br><img loading="lazy" src="https://cdn.adtidy.org/public/Adguard/kb/en/rules_syntax/css_id_selector.png" class="img_ev3q"></td></tr><tr><td>Class selector</td><td><code>.banners</code></td><td>Matches all elements with <code>class</code> attribute containing <code>banners</code>.<br><img loading="lazy" src="https://cdn.adtidy.org/public/Adguard/kb/en/rules_syntax/css_class_selector.png" class="img_ev3q"></td></tr><tr><td>Attribute selector</td><td><code>div[class=&quot;banners&quot;]</code></td><td>Matches all <code>div</code> elements with <code>class</code> attribute <strong>exactly equal</strong> to <code>banners</code>.<br><img loading="lazy" src="https://cdn.adtidy.org/public/Adguard/kb/en/rules_syntax/css_class_attr.png" class="img_ev3q"></td></tr><tr><td>Attribute substring selector</td><td><code>div[class^=&quot;advert1&quot;]</code></td><td>Matches all <code>div</code> elements which <code>class</code> attribute <strong>starts with</strong> the <code>advert1</code> string.<br><img loading="lazy" src="https://cdn.adtidy.org/public/Adguard/kb/en/rules_syntax/css_class_attr_start.png" class="img_ev3q"></td></tr><tr><td>Attribute substring selector</td><td><code>div[class$=&quot;banners_ads&quot;]</code></td><td>Matches all <code>div</code> elements which <code>class</code> attribute <strong>ends with</strong> the <code>banners_ads</code> string.<br><img loading="lazy" src="https://cdn.adtidy.org/public/Adguard/kb/en/rules_syntax/css_class_attr_end.png" class="img_ev3q"></td></tr><tr><td>Attribute substring selector</td><td><code>a[href^=&quot;http://example.com/&quot;]</code></td><td>Matches all links that are loaded from <code>http://example.com/</code> domain.<br><img loading="lazy" src="https://cdn.adtidy.org/public/Adguard/kb/en/rules_syntax/css_attr_start.png" class="img_ev3q"></td></tr><tr><td>Attribute selector</td><td><code>a[href=&quot;http://example.com/&quot;]</code></td><td>Matches all links to <strong>exactly</strong> the <code>http://example.com/</code> address.<br><img loading="lazy" src="https://cdn.adtidy.org/public/Adguard/kb/en/rules_syntax/css_attr_equal.png" class="img_ev3q"></td></tr></tbody></table><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="restrictions">Restrictions<a class="hash-link" href="#restrictions" title="Direktlink zur Überschrift">​</a></h2><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="trusted-filters">Trusted filters<a class="hash-link" href="#trusted-filters" title="Direktlink zur Überschrift">​</a></h4><p>Some rules can be used only in trusted filters. This category includes:</p><blockquote><ul><li>filter lists <a href="/KnowledgeBase/de/general/ad-filtering/adguard-filters/">created by the AdGuard team</a>,</li><li>custom filter lists installed as <code>trusted</code>,</li><li>user rules.</li></ul></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="basic-rules">Basic rules<a class="hash-link" href="#basic-rules" title="Direktlink zur Überschrift">​</a></h2><p>The most simple rules are so-called <em>Basic rules</em>. They are used to block requests to specific URLs. Or to unblock it, if there is a special marker &quot;@@&quot; at the beginning of the rule. The basic principle for this type of rules is quite simple: you have to specify the address and additional parameters that limit or expand the scope of the rule.</p><blockquote><p><strong>Sub-requests</strong></p><p>Basic rules for blocking requests are applied only to <strong>sub-requests</strong>. That means they will not block the loading of the page.</p></blockquote><blockquote><p><strong>Response status</strong></p><p>Browser detects a blocked request as completed with an error.</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="basic-rules-syntax">Basic rules syntax<a class="hash-link" href="#basic-rules-syntax" title="Direktlink zur Überschrift">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">      rule = [&quot;@@&quot;] pattern [ &quot;$&quot; modifiers ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">modifiers = [modifier0, modifier1[, ...[, modifierN]]]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong><code>pattern</code></strong> — an address mask. Every request URL is collated to this mask. You can also use special characters in the template, their description is <a href="#basic-rules-special-characters">below</a>. Note that AdGuard trims URLs to a length of 4096 characters in order to speed up matching and avoid issues with ridiculously long URLs.</li><li><strong><code>@@</code></strong> — a marker that is used in rules of exception. To turn off filtering for a request, start your rule with this marker.</li><li><strong><code>modifiers</code></strong> — parameters that &quot;clarify&quot; the basic rule. Some of them limit the scope of the rule and some can completely change they way it works.</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="basic-rules-special-characters">Special characters<a class="hash-link" href="#basic-rules-special-characters" title="Direktlink zur Überschrift">​</a></h3><ul><li><strong><code>*</code></strong> — a wildcard character. It is used to represent &quot;any set of characters&quot;. This can also be an empty string or a string of any length.</li><li><strong><code>||</code></strong> — matching the beginning of an address. With this character you do not have to specify a particular protocol and subdomain in address mask. It means, <code>||</code> stands for <code>http://*.</code>, <code>https://*.</code>, <code>ws://*.</code>, <code>wss://*.</code> at once.</li><li><strong><code>^</code></strong> — a separator character mark. Separator character is any character, but a letter, a digit, or one of the following: <code>_</code> <code>-</code> <code>.</code> <code>%</code>. In this example separator characters are shown in bold: <code>http:</code><strong><code>//</code></strong><code>example.com</code><strong><code>/?</code></strong><code>t=1</code><strong><code>&amp;</code></strong><code>t2=t3</code>. The end of the address is also accepted as separator.</li><li><strong><code>|</code></strong> — a pointer to the beginning or the end of address. The value depends on the character placement in the mask. For example, a rule <code>swf|</code> corresponds to <code>http://example.com/annoyingflash.swf</code> , but not to <code>http://example.com/swf/index.html</code>. <code>|http://example.org</code> corresponds to <code>http://example.org</code>, but not to <code>http://domain.com?url=http://example.org</code>.</li></ul><blockquote><p><strong>Visual representation</strong></p><p>We also recommend to get acquainted with <a href="https://adblockplus.org/filter-cheatsheet#blocking" target="_blank" rel="noopener noreferrer">this article</a>, for better understanding of how such rules should be made.</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="regexp-support">Regular expressions support<a class="hash-link" href="#regexp-support" title="Direktlink zur Überschrift">​</a></h3><p>If you want even more flexibility in making rules, you can use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions" target="_blank" rel="noopener noreferrer">Regular expressions</a> instead of a default simplified mask with special characters.</p><blockquote><p><strong>Performance</strong></p><p>Rules with regular expressions work more slowly, therefore it is recommended to avoid them or to limit their scope to specific domains.</p></blockquote><p>If you want a blocker to determine a regular expression, the <code>pattern</code> has to look like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pattern = &quot;/&quot; regexp &quot;/&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For example, <code>/banner\d+/$third-party</code> this rule will apply the regular expression <code>banner\d+</code> to all third-party requests. Exclusion rule with regular expression looks like this: <code>@@/banner\d+/</code>.</p><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>AdGuard Safari and AdGuard for iOS do not fully support regular expressions because of <a href="https://webkit.org/blog/3476/content-blockers-first-look/" target="_blank" rel="noopener noreferrer">Content Blocking API restrictions</a> (look for &quot;The Regular expression format&quot; section).</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="wildcard-for-tld">Wildcard support for TLD (top-level domains)<a class="hash-link" href="#wildcard-for-tld" title="Direktlink zur Überschrift">​</a></h3><p>Wildcard characters are supported for TLDs of the domains in patterns of <a href="#cosmetic-rules">cosmetic</a>, <a href="#html-filtering-rules">HTML filtering</a> and <a href="#javascript-rules">JavaScript</a> rules.</p><p>For cosmetic rules, e.g. <code>example.*##.banner</code>, multiple domains are matched due to the part <code>.*</code>, i.e. <code>example.com</code>, <code>sub.example.net</code>, <code>example.co.uk</code>, etc.</p><p>For basic rules the described logic is applicable only for the domains specified in <a href="#domain-modifier"><code>$domain</code> modifier</a>, e.g. <code>||*/banners/*$image,domain=example.*</code>.</p><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>In AdGuard for Windows, Mac, Android, and AdGuard Browser extension rules with wildcard <code>.*</code> match any <a href="https://publicsuffix.org/list/" target="_blank" rel="noopener noreferrer">public suffix (or eTLD)</a>. But for AdGuard for Safari and iOS <a href="https://github.com/AdguardTeam/SafariConverterLib/blob/v2.0.31/Sources/ContentBlockerConverter/Compiler/BlockerEntryFactory.swift#L44" target="_blank" rel="noopener noreferrer">the supported list of top-level domains</a> is limited due to Safari limitations.</p><p>Rules with wildcard for TLD are not supported by AdGuard Content Blocker.</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="basic-rules-examples">Basic rules examples<a class="hash-link" href="#basic-rules-examples" title="Direktlink zur Überschrift">​</a></h3><ul><li><p><code>||example.com/ads/*</code> — a simple rule, which corresponds to addresses like <code>http://example.com/ads/banner.jpg</code> and even <code>http://subdomain.example.com/ads/otherbanner.jpg</code>.</p></li><li><p><code>||example.org^$third-party</code> —  this rule blocks third-party requests to <code>example.org</code> and its subdomains.</p></li><li><p><code>@@||example.com$document</code> — general exception rule. It completely disables filtering for <code>example.com</code> and all subdomains. There is a number of modifiers which can be used in exception rules. For more details, please follow the link <a href="#exception-modifiers">below</a>.</p></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="basic-rules-modifiers">Basic rules modifiers<a class="hash-link" href="#basic-rules-modifiers" title="Direktlink zur Überschrift">​</a></h3><ul><li><a href="#basic-rules-basic-modifiers">Basic modifiers</a></li><li><a href="#content-type-modifiers">Content type modifiers</a></li><li><a href="#exception-modifiers">Exception modifiers</a></li></ul><blockquote><p><strong>Note</strong></p><p>The features described in this section are intended for experienced users. They extend capabilities of &quot;Basic rules&quot;, but in order to use them you need to have a basic understanding of the way your browser works.</p></blockquote><p>You can change the behavior of a &quot;basic rule&quot; by using additional modifiers. Modifiers should be located in the end of the rule after a <code>$</code> sign and be separated by commas.</p><p>Example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">||domain.com^$popup,third-party</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="basic-rules-basic-modifiers">Basic modifiers<a class="hash-link" href="#basic-rules-basic-modifiers" title="Direktlink zur Überschrift">​</a></h4><ul><li><a href="#domain-modifier"><code>$domain</code></a></li><li><a href="#to-modifier"><code>$to</code></a></li><li><a href="#third-party-modifier"><code>$third-party</code></a></li><li><a href="#popup-modifier"><code>$popup</code></a></li><li><a href="#match-case-modifier"><code>$match-case</code></a></li><li><a href="#header-modifier"><code>$header</code></a></li></ul><p>The following modifiers are the most simple and frequently used.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="domain-modifier"><strong><code>$domain</code></strong><a class="hash-link" href="#domain-modifier" title="Direktlink zur Überschrift">​</a></h4><p><code>$domain</code> limits the rule scope to requests made <strong>from</strong> the specified domains and their subdomains (as indicated by the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referer" target="_blank" rel="noopener noreferrer">Referer</a> HTTP header). To add multiple domains to one rule, use the <code>|</code>  character as a separator.</p><p><strong>Examples</strong></p><p><strong>Just <code>$domain</code>:</strong></p><ul><li><code>||baddomain.com^$domain=example.org</code> blocks requests that match the specified mask, and are sent from domain <code>example.org</code> or its subdomains.</li><li><code>||baddomain.com^$domain=example.org|example.com</code> — the same rule, but it works for both <code>example.org</code> and <code>example.com</code>.</li></ul><p>If you want the rule not to be applied to certain domains, start a domain name with <code>~</code> sign.</p><p><strong><code>$domain</code> and negation <code>~</code>:</strong></p><ul><li><code>||baddomain.com^$domain=~example.org</code> blocks requests matching the pattern sent from any domain except <code>example.org</code> and its subdomains.</li><li><code>||baddomain.com^$domain=example.org|~foo.example.org</code> blocks requests sent from <code>example.org</code> and its subdomains, except the subdomain <code>foo.example.org</code>.</li></ul><p><strong><code>$domain</code> modifier matching target domain:</strong></p><p>In some cases the <code>$domain</code> modifier can match not only the referrer domain, but also the target domain. This happens when all of the following is true:</p><p>1) The request has <code>document</code> content type. 2) The rule pattern does not match any particular domains. 3) The rule pattern does not contain regular expressions. 4) The <code>$domain</code> modifier contains only excluded domains, e.g. <code>$domain=~example.org|~example.com</code>.</p><p>The following predicate should be satisfied to perform a target domain matching: <code>1 AND ((2 AND 3) OR 4)</code>. That is, if the modifier <code>$domain</code> contains only excluded domains, then the rule does not need to meet the second and third conditions to match the target domain against the modifier <code>$domain</code>.</p><p>If some of the conditions above are not met but the rule contains <a href="#cookie-modifier"><code>$cookie</code></a> or <a href="#csp-modifier"><code>$csp</code></a> modifier, the target domain will still be matched.</p><p>If the referrer matches a rule with <code>$domain</code> that explicitly excludes the referrer domain, then the rule will not be applied even if the target domain also matches the rule. This affects rules with <a href="#cookie-modifier"><code>$cookie</code></a> and <a href="#csp-modifier"><code>$csp</code></a> modifiers, too.</p><p><strong>Examples</strong></p><ul><li><code>*$cookie,domain=example.org|example.com</code> will block cookies for all requests to and from <code>example.org</code> and <code>example.com</code>.</li><li><code>*$document,domain=example.org|example.com</code> will block all requests to and from <code>example.org</code> and <code>example.com</code>.</li></ul><p>In the following examples it is implied that requests are sent from <code>http://example.org/page</code> (the referrer) and the target URL is <code>http://targetdomain.com/page</code>.</p><ul><li><code>page$domain=example.org</code> will be matched, as it matches the referrer domain.</li><li><code>page$domain=targetdomain.com</code> will be matched, as it matches the target domain and satisfies all requirements mentioned above.</li><li><code>||*page$domain=targetdomain.com</code> will not be matched, as the pattern <code>||*page</code> matches specific domains.</li><li><code>||*page$domain=targetdomain.com,cookie</code> will be matched despite the pattern <code>||*page</code> matches specific domains because it contains <code>$cookie</code> modifier.</li><li><code>/banner\d+/$domain=targetdomain.com</code> will not be matched as it contains a regular expression.</li><li><code>page$domain=targetdomain.com|~example.org</code> will not be matched because the referrer domain is explicitly excluded.</li></ul><blockquote><p><strong>Limitations</strong></p><p>Safari does not support the simultaneous use of allowed and disallowed domains, so rules like <code>||baddomain.com^$domain=example.org|~foo.example.org</code> will not work in AdGuard for Safari.</p></blockquote><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>Starting with CoreLibs v1.12, the <code>$domain</code> modifier can be alternatively spelled as <code>$from</code>.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="to-modifier"><strong><code>$to</code></strong><a class="hash-link" href="#to-modifier" title="Direktlink zur Überschrift">​</a></h4><p><code>$to</code> limits the rule scope to requests made <strong>to</strong> the specified domains and their subdomains. To add multiple domains to one rule, use the <code>|</code>  character as a separator.</p><p><strong>Examples</strong></p><ul><li><code>/ads$to=evil.com|evil.org</code> blocks any request to <code>evil.com</code> or <code>evil.org</code> and their subdomains with a path matching <code>/ads</code>.</li><li><code>/ads$to=~not.evil.com|evil.com</code> blocks any request to <code>evil.com</code> and its subdomains, with a path matching <code>/ads</code>, except requests to <code>not.evil.com</code> and its subdomains.</li><li><code>/ads$to=~good.com|~good.org</code> blocks any request with a path matching <code>/ads</code>, except requests to <code>good.com</code> or <code>good.org</code> and their subdomains.</li></ul><blockquote><p><strong>Compatibility with other modifiers</strong></p><p><a href="#denyallow-modifier"><code>$denyallow</code></a> can not be used together with <code>$to</code>. It can be expressed with inverted <code>$to</code>: <code>$denyallow=a.com|b.com</code> is equivalent to <code>$to=~a.com|~b.com</code>.</p></blockquote><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p><code>$to</code> is available starting with CoreLibs v1.12.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="third-party-modifier"><strong><code>$third-party</code></strong><a class="hash-link" href="#third-party-modifier" title="Direktlink zur Überschrift">​</a></h4><p>A restriction of third-party and own requests. A third-party request is a request from a different domain. For example, a request to <code>example.org</code>, from <code>domain.com</code> is a third-party request.</p><blockquote><p>To be considered as such, a third-party request should meet one of the following conditions: 1) Its referrer is not a subdomain of the target domain or the other way round. For example, a request to <code>subdomain.example.org</code> from <code>example.org</code> is not a third-party request. 2) Its <code>Sec-Fetch-Site</code> header is set to <code>cross-site</code>. If there is a <code>$third-party</code> modifier, the rule is only applied to third-party requests.</p></blockquote><p><strong>Examples</strong></p><p><strong><code>$third-party</code>:</strong></p><ul><li><code>||domain.com^$third-party</code> — this rule applies to all domains, except <code>domain.com</code> and its subdomains. A third-party request example: <code>http://example.org/banner.jpg</code>.</li></ul><p>If there is a <code>$~third-party</code> modifier, the rule is only applied to the requests that are not from third-party. Which means, they have to be sent from the same domain.</p><p><strong><code>$~third-party</code>:</strong></p><ul><li><code>||domain.com$~third-party</code> — this rule is applied to <code>domain.com</code>, but not to the other domains. Example of a request that is not a third-party request: <code>http://domain.com/icon.ico</code>.</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="popup-modifier"><strong><code>$popup</code></strong><a class="hash-link" href="#popup-modifier" title="Direktlink zur Überschrift">​</a></h4><p>AdGuard will try to close the browser tab with any address that matches a blocking rule with this modifier. Please note that not all the tabs can be closed.</p><p><strong>Examples</strong></p><ul><li><code>||domain.com^$popup</code> — if you try to go to <code>http://domain.com/</code> from any page in the browser, a new tab in which specified site has to be opened will be closed by this rule.</li></ul><blockquote><p>It may not work if the popped up page is cached by the browser. It also will not work with some tricky popup methods. In such cases, it is better to use <a href="https://github.com/AdguardTeam/PopupBlocker" target="_blank" rel="noopener noreferrer">AdGuard Popup Blocker</a> extension.</p></blockquote><blockquote><p><strong>Note</strong></p><p>Unlike with AdGuard Browser extension, <code>$popup</code> modifier is very unreliable when used with AdGuard for Windows, Mac and Android. In AdGuard for Safari and iOS, <code>$popup</code> rules will simply block the page right away.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="match-case-modifier"><strong><code>$match-case</code></strong><a class="hash-link" href="#match-case-modifier" title="Direktlink zur Überschrift">​</a></h4><p>This modifier defines a rule which applies only to addresses that match the case. Default rules are case-insensitive.</p><p><strong>Examples</strong></p><ul><li><code>*/BannerAd.gif$match-case</code> — this rule will block <code>http://example.com/BannerAd.gif</code>, but not <code>http://example.com/bannerad.gif</code>.</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="header-modifier"><strong><code>$header</code></strong><a class="hash-link" href="#header-modifier" title="Direktlink zur Überschrift">​</a></h4><p>The <code>$header</code> modifier allows matching the HTTP response having a specific header with (optionally) a specific value.</p><p><strong>Syntax</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$header &quot;=&quot; h_name [&quot;:&quot; h_value]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">h_value = string / regexp</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>where:</p><ul><li><strong><code>h_name</code></strong> — required, an HTTP header name. It is matched case-insesitively.</li><li><strong><code>h_value</code></strong> — optional, an HTTP header value matching expression, it may be one of the following:<ul><li><strong><code>string</code></strong> — a sequence of characters. It is matched against the header value lexicographically;</li><li><strong><code>regexp</code></strong> — a regular expression, starts and ends with <code>/</code>. The pattern works the same way as in the basic URL rules, but the characters <code>/</code>, <code>$</code> and <code>,</code> must be escaped with <code>\</code>.</li></ul></li></ul><p>The modifier <code>&quot;:&quot; h_value</code> part may be omitted. In that case the modifier matches the header name only.</p><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>Rules with the <code>$header</code> modifier are supported by AdGuard for Windows, Mac, and Android, <strong>running CoreLibs version 1.11 or later</strong>.</p></blockquote><p><strong>Examples</strong></p><ul><li><code>||example.com^$header=set-cookie:foo</code> blocks requests which responses have the <code>Set-Cookie</code> header with the value matching <code>foo</code> literally.</li><li><code>||example.com^$header=set-cookie</code> blocks requests which responses have the <code>Set-Cookie</code> header with any value.</li><li><code>@@||example.com^$header=set-cookie:/foo\, bar\$/</code> unblocks requests which responses have the <code>Set-Cookie</code> header with value matching the <code>foo, bar$</code> regular expression.</li><li><code>@@||example.com^$header=set-cookie</code> unblocks requests which responses have a <code>Set-Cookie</code> header with any value.</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="content-type-modifiers">Restriction by content type<a class="hash-link" href="#content-type-modifiers" title="Direktlink zur Überschrift">​</a></h4><ul><li><a href="#document-modifier"><code>$document</code></a></li><li><a href="#image-modifier"><code>$image</code></a></li><li><a href="#stylesheet-modifier"><code>$stylesheet</code></a></li><li><a href="#script-modifier"><code>$script</code></a></li><li><a href="#object-modifier"><code>$object</code></a></li><li><a href="#font-modifier"><code>$font</code></a></li><li><a href="#media-modifier"><code>$media</code></a></li><li><a href="#subdocument-modifier"><code>$subdocument</code></a></li><li><a href="#ping-modifier"><code>$ping</code></a></li><li><a href="#xmlhttprequest-modifier"><code>$xmlhttprequest</code></a></li><li><a href="#websocket-modifier"><code>$websocket</code></a></li><li><a href="#other-modifier"><code>$other</code></a></li><li><a href="#object-subrequest-modifier"><code>$object-subrequest</code> (deprecated)</a></li><li><a href="#webrtc-modifier"><code>$webrtc</code> (deprecated)</a></li></ul><p>There is a set of modifiers, which can be used to limit the rule&#x27;s application area to certain type of content. These modifiers can also be combined to cover, for example, both images and scripts.</p><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>There is a big difference in how AdGuard determines the content type on different platforms. For AdGuard Browser extension, content type for every request is provided by browser. AdGuard for Windows, Mac, Android use following method: first we try to determine the type of the request by the <code>Sec-Fetch-Dest</code> request header or by the filename extension. If the request is not blocked at this stage, the type will be determined using the <code>Content-Type</code> header at the beginning of the server response.</p></blockquote><p><strong>Content type modifiers examples</strong></p><ul><li><code>||example.org^$image</code> — corresponds to all images from <code>example.org</code>.</li><li><code>||example.org^$script,stylesheet</code> — corresponds to all the scripts and styles from <code>example.org</code>.</li><li><code>||example.org^$~image,~script,~stylesheet</code> — corresponds to all requests to <code>example.org</code> except for the images, scripts and styles.</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="document-modifier"><strong><code>$document</code></strong><a class="hash-link" href="#document-modifier" title="Direktlink zur Überschrift">​</a></h4><p>The rule corresponds to the main frame document requests, i.e. HTML documents that are loaded in the browser tab. It does not match iframes, there is a <a href="#subdocument-modifier"><code>$subdocument</code> modifier</a> for these.</p><p>By default, AdGuard does not block the requests that are loaded in the browser tab (e.g. &quot;main frame bypass&quot;). The idea is not to prevent pages from loading as the user clearly indicated that they want this page to be loaded. However, if the <code>$document</code> modifier is specified explicitly, AdGuard does not use that logic and prevents the page load. Instead, it responds with a &quot;blocking page&quot;.</p><p>If this modifier is used with an exclusion rule (<code>@@</code>), it completely disables blocking on corresponding pages. It is equivalent to using <code>$elemhide</code>, <code>$content</code>, <code>$urlblock</code>, <code>$jsinject</code>, and <code>$extension</code> modifiers simultaneously.</p><p><strong>Examples</strong></p><ul><li><p><code>@@||example.com^$document</code> completely disables filtering on all pages at <code>example.com</code> and all subdomains.</p></li><li><p><code>@@||example.com^$document,~extension</code> completely disables blocking on any pages at <code>example.com</code> and all subdomains, but continues to run userscripts there.</p></li><li><p><code>||example.com^$document</code> blocks HTML document request to <code>example.com</code> with a blocking page.</p></li><li><p><code>||example.com^$document,redirect=noopframe</code> redirects HTML document request to <code>example.com</code> to an empty html document.</p></li><li><p><code>||example.com^$document,removeparam=test</code> removes <code>test</code> query parameter from HTML document request to  <code>example.com</code>.</p></li><li><p><code>||example.com^$document,replace=/test1/test2/</code> replaces <code>test1</code> with <code>test2</code> in  HTML document request to <code>example.com</code>.</p></li></ul><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>Blocking rules with <code>$document</code> modifier are not supported by AdGuard Content Blocker.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="image-modifier"><strong><code>$image</code></strong><a class="hash-link" href="#image-modifier" title="Direktlink zur Überschrift">​</a></h4><p>The rule corresponds to images requests.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="stylesheet-modifier"><strong><code>$stylesheet</code></strong><a class="hash-link" href="#stylesheet-modifier" title="Direktlink zur Überschrift">​</a></h4><p>The rule corresponds to CSS files requests.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="script-modifier"><strong><code>$script</code></strong><a class="hash-link" href="#script-modifier" title="Direktlink zur Überschrift">​</a></h4><p>The rule corresponds to script requests, e.g. javascript, vbscript.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="object-modifier"><strong><code>$object</code></strong><a class="hash-link" href="#object-modifier" title="Direktlink zur Überschrift">​</a></h4><p>The rule corresponds to browser plugins resources, e.g. Java or Flash.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="font-modifier"><strong><code>$font</code></strong><a class="hash-link" href="#font-modifier" title="Direktlink zur Überschrift">​</a></h4><p>The rule corresponds to requests for fonts, e.g. <code>.woff</code> filename extension.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="media-modifier"><strong><code>$media</code></strong><a class="hash-link" href="#media-modifier" title="Direktlink zur Überschrift">​</a></h4><p>The rule corresponds to requests for media files — music and video, e.g. <code>.mp4</code> files.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="subdocument-modifier"><strong><code>$subdocument</code></strong><a class="hash-link" href="#subdocument-modifier" title="Direktlink zur Überschrift">​</a></h4><p>The rule corresponds to requests for built-in pages — HTML tags <code>frame</code> and <code>iframe</code>.</p><p><strong>Examples</strong></p><ul><li><code>||example.com^$subdocument</code> blocks built-in page requests (<code>frame</code> and <code>iframe</code>) to <code>example.com</code> and all its subdomains anywhere.</li><li><code>||example.com^$subdocument,domain=domain.com</code> blocks built-in page requests (<code>frame</code> и <code>iframe</code>) to <code>example.com</code> (and its subdomains) from <code>domain.com</code> and all its subdomains.</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="ping-modifier"><strong><code>$ping</code></strong><a class="hash-link" href="#ping-modifier" title="Direktlink zur Überschrift">​</a></h4><p>The rule corresponds to requests caused by either <code>navigator.sendBeacon()</code> or the <code>ping</code> attribute on links.</p><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>AdGuard for Windows, Mac, Android often cannot accurately detect <code>navigator.sendBeacon()</code>. For reliable detection, use AdGuard Browser extension.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="xmlhttprequest-modifier"><strong><code>$xmlhttprequest</code></strong><a class="hash-link" href="#xmlhttprequest-modifier" title="Direktlink zur Überschrift">​</a></h4><p>The rule applies only to ajax requests (requests sent via javascript object <code>XMLHttpRequest</code>).</p><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>AdGuard for Windows, Mac, Android often cannot accurately detect this type and sometimes detects it as <a href="#other-modifier"><code>$other</code></a> or <a href="#script-modifier"><code>$script</code></a>. For reliable detection, use AdGuard Browser extension.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="websocket-modifier"><strong><code>$websocket</code></strong><a class="hash-link" href="#websocket-modifier" title="Direktlink zur Überschrift">​</a></h4><p>The rule applies only to WebSocket connections.</p><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>AdGuard for Safari and iOS cannot properly apply rules with <code>websocket</code> modifier due to Safari limitations.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="other-modifier"><strong><code>$other</code></strong><a class="hash-link" href="#other-modifier" title="Direktlink zur Überschrift">​</a></h4><p>The rule applies to requests for which the type has not been determined or does not match the types listed above.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="webrtc-modifier"><strong><code>$webrtc</code> (deprecated)</strong><a class="hash-link" href="#webrtc-modifier" title="Direktlink zur Überschrift">​</a></h4><blockquote><p><strong>Deprecation notice</strong></p><p>This modifier is deprecated and is no longer supported. Rules with it are considered as invalid. If you need to suppress WebRTC, consider using the <code>nowebrtc</code> <a href="#scriptlets">scriptlet</a>.</p></blockquote><p>The rule applies only to WebRTC connections.</p><p><strong>Examples</strong></p><ul><li><code>||example.com^$webrtc,domain=example.org</code> blocks webRTC connections to <code>example.com</code> for <code>example.org</code>.</li><li><code>@@*$webrtc,domain=example.org</code> disables the RTC wrapper for <code>example.org</code>.</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="object-subrequest-modifier"><strong><code>$object-subrequest</code> (deprecated)</strong><a class="hash-link" href="#object-subrequest-modifier" title="Direktlink zur Überschrift">​</a></h4><blockquote><p><strong>Deprecation notice</strong></p><p><code>$object-subrequest</code> modifier is deprecated and is no longer supported. Rules with it are considered as invalid. The rule corresponds to requests by browser plugins (it is usually Flash).</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exception-modifiers">Exception modifiers<a class="hash-link" href="#exception-modifiers" title="Direktlink zur Überschrift">​</a></h4><ul><li><a href="#elemhide-modifier"><code>$elemhide</code></a></li><li><a href="#content-modifier"><code>$content</code></a></li><li><a href="#jsinject-modifier"><code>$jsinject</code></a></li><li><a href="#urlblock-modifier"><code>$urlblock</code></a></li><li><a href="#extension-modifier"><code>$extension</code></a></li><li><a href="#stealth-modifier"><code>$stealth</code></a></li><li><a href="#specifichide-modifier"><code>$specifichide</code></a></li><li><a href="#exception-modifiers-generic-rules">Generic rules</a><ul><li><a href="#generichide-modifier"><code>$generichide</code></a></li><li><a href="#generichide-modifier"><code>$generichide</code></a></li></ul></li></ul><p>Exception rules disable the other basic rules for the addresses to which they correspond. They begin with a <code>@@</code> mark. All the basic modifiers listed above can be applied to them and they also have a few special modifiers.</p><blockquote><p><strong>Visual representation</strong></p><p>We recommend to get acquainted with <a href="https://adblockplus.org/filter-cheatsheet#blocking" target="_blank" rel="noopener noreferrer">this article</a>, for better understanding of how exception rules should be made.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="elemhide-modifier"><strong><code>$elemhide</code></strong><a class="hash-link" href="#elemhide-modifier" title="Direktlink zur Überschrift">​</a></h4><p>Disables any <a href="#cosmetic-rules">cosmetic rules</a> on the pages matching the rule.</p><p><strong>Examples</strong></p><ul><li><code>@@||example.com^$elemhide</code> disables all cosmetic rules on pages at <code>example.com</code> and all subdomains.</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="content-modifier"><strong><code>$content</code></strong><a class="hash-link" href="#content-modifier" title="Direktlink zur Überschrift">​</a></h4><p>Disables <a href="#html-filtering-rules">HTML filtering</a> and <a href="#replace-modifier"><code>$replace</code></a> rules on the pages that match the rule.</p><p><strong>Examples</strong></p><ul><li><code>@@||example.com^$content</code> disables all HTML filtering rules and replace rules on pages at <code>example.com</code> and all its subdomains.</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="jsinject-modifier"><strong><code>$jsinject</code></strong><a class="hash-link" href="#jsinject-modifier" title="Direktlink zur Überschrift">​</a></h4><p>Forbids adding of javascript code to the page. You can read about javascript rules further.</p><p><strong>Examples</strong></p><ul><li><code>@@||example.com^$jsinject</code> disables javascript on pages at <code>example.com</code> and all subdomains.</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="urlblock-modifier"><strong><code>$urlblock</code></strong><a class="hash-link" href="#urlblock-modifier" title="Direktlink zur Überschrift">​</a></h4><p>Disables blocking of all requests sent from the pages matching the rule.</p><p><strong>Examples</strong></p><ul><li><code>@@||example.com^$urlblock</code> — any requests sent from the pages at <code>example.com</code> and all subdomains are not going to be blocked.</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extension-modifier"><strong><code>$extension</code></strong><a class="hash-link" href="#extension-modifier" title="Direktlink zur Überschrift">​</a></h4><p>Disables all userscripts on the pages matching this rule.</p><p><strong>Examples</strong></p><ul><li><code>@@||example.com^$extension</code> — userscripts will not work on all pages of the <code>example.com</code> website.</li></ul><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>Only AdGuard for Windows, Mac, Android are technically capable of using rules with <code>$extension</code> modifier.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="stealth-modifier"><strong><code>$stealth</code></strong><a class="hash-link" href="#stealth-modifier" title="Direktlink zur Überschrift">​</a></h4><p>Disables the Stealth Mode module for all corresponding pages and requests.</p><p><strong>Syntax</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$stealth [= opt1 [| opt2 [| opt3 [...]]]]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>opt(i)</code> stand for certain Stealth Mode options disabled by the modifier. The modifier can contain any number of options (see below) or not contain them at all. In the latter case the modifier disables all the Stealth Mode features.</p><p>The list of the available modifier options:</p><ul><li><code>searchqueries</code> disables <a href="/KnowledgeBase/de/general/stealth-mode/#searchqueries"><strong>Hide your search queries</strong></a> option</li><li><code>donottrack</code> disables <a href="/KnowledgeBase/de/general/stealth-mode/#donottrack"><strong>Send Do-Not-Track header</strong></a> option</li><li><code>3p-cookie</code> disables <a href="/KnowledgeBase/de/general/stealth-mode/#3p-cookie"><strong>Self-destructing third-party cookies</strong></a> option</li><li><code>1p-cookie</code> disables <a href="/KnowledgeBase/de/general/stealth-mode/#1p-cookie"><strong>Self-destructing first-party cookies</strong></a> option</li><li><code>3p-cache</code> disables <a href="/KnowledgeBase/de/general/stealth-mode/#3p-cache"><strong>Disable cache for third-party requests</strong></a> option</li><li><code>3p-auth</code> disables <a href="/KnowledgeBase/de/general/stealth-mode/#3p-auth"><strong>Block third-party Authorization header</strong></a> option</li><li><code>webrtc</code> disables <a href="/KnowledgeBase/de/general/stealth-mode/#webrtc"><strong>Block WebRTC</strong></a> option</li><li><code>push</code> disables <a href="/KnowledgeBase/de/general/stealth-mode/#push"><strong>Block Push API</strong></a> option</li><li><code>location</code> disables <a href="/KnowledgeBase/de/general/stealth-mode/#location"><strong>Block Location API</strong></a> option</li><li><code>flash</code> disables <a href="/KnowledgeBase/de/general/stealth-mode/#flash"><strong>Block Flash</strong></a> option</li><li><code>java</code> disables <a href="/KnowledgeBase/de/general/stealth-mode/#java"><strong>Block Java</strong></a> option</li><li><code>referrer</code> disables <a href="/KnowledgeBase/de/general/stealth-mode/#miscellaneous"><strong>Hide Referrer from third parties</strong></a> option</li><li><code>useragent</code> disables <a href="/KnowledgeBase/de/general/stealth-mode/#useragent"><strong>Hide your User-Agent</strong></a> option</li><li><code>ip</code> disables <a href="/KnowledgeBase/de/general/stealth-mode/#ip"><strong>Hide your IP address</strong></a> option</li><li><code>xclientdata</code> disables <a href="/KnowledgeBase/de/general/stealth-mode/#xclientdata"><strong>Remove X-Client-Data header from HTTP requests</strong></a> option</li><li><code>dpi</code> disables <a href="/KnowledgeBase/de/general/stealth-mode/#dpi"><strong>Protect from DPI</strong></a> option</li></ul><p><strong>Examples</strong></p><ul><li><code>@@||example.com^$stealth</code> disables Stealth Mode for <code>example.com</code> (and subdomains) requests, except for blocking cookies and hiding tracking parameters (see below).</li><li><code>@@||domain.com^$script,stealth,domain=example.com</code> disables Stealth Mode only for script requests to <code>domain.com</code> (and its subdomains) on <code>example.com</code> and all its subdomains.</li><li><code>@@||example.com^$stealth=3p-cookie|dpi</code> disables blocking third-party cookies and DPI fooling measures for <code>example.com</code>.</li></ul><blockquote><p><strong>Note</strong></p><p>Blocking cookies and removing tracking parameters is achieved by using rules with <a href="#cookie-modifier"><code>$cookie</code></a> and <a href="#removeparam-modifier"><code>$removeparam</code></a> modifiers. Exception rules with only <code>$stealth</code> modifier will not do those things. If you want to completely disable all Stealth Mode features for a given domain, you need to include all three modifiers: <code>@@||example.org^$stealth,removeparam,cookie</code></p></blockquote><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><ul><li>Stealth Mode is available in AdGuard for Windows, Mac, Android, and AdGuard Browser extension. All other products will ignore the rules with <code>$stealth</code> modifier.</li><li><code>$stealth</code> modifier with specific options is supported by AdGuard for Windows, Mac, and Android, <strong>running CoreLibs version 1.10 or later</strong>.</li></ul></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="specifichide-modifier"><strong><code>specifichide</code></strong><a class="hash-link" href="#specifichide-modifier" title="Direktlink zur Überschrift">​</a></h4><p>Disables all specific element hiding and CSS rules, but not general ones. Has an opposite effect to <a href="#generichide-modifier"><code>$generichide</code></a>.</p><p><strong>Examples</strong></p><ul><li><code>@@||example.org^$specifichide</code> disables <code>example.org##.banner</code> but not <code>##.banner</code>.</li></ul><blockquote><p><strong>Note</strong></p><p>All cosmetic rules — not just specific ones — can be disabled by <a href="#elemhide-modifier"><code>$elemhide</code> modifier</a>.</p></blockquote><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>Rules with <code>$specifichide</code> modifier are supported by AdGuard for Windows, Mac, Android, and AdGuard Browser extension for Chrome, Firefox, Edge.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="exception-modifiers-generic-rules">Generic rules<a class="hash-link" href="#exception-modifiers-generic-rules" title="Direktlink zur Überschrift">​</a></h4><p>Before we can proceed to the next modifiers, we have to make a definition of <em>generic rules</em>. The rule is generic if it is not limited to specific domains. Wildcard character <code>*</code> is supported as well.</p><p>For example, these rules are generic:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">###banner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*###banner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#@#.adsblock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*#@#.adsblock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">~domain.com###banner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">||domain.com^</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">||domain.com^$domain=~example.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And these are not:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">domain.com###banner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">||domain.com^$domain=example.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="generichide-modifier"><strong><code>$generichide</code></strong><a class="hash-link" href="#generichide-modifier" title="Direktlink zur Überschrift">​</a></h5><p>Disables all generic <a href="#cosmetic-rules">cosmetic rules</a> on pages that correspond to exception rule.</p><p><strong>Examples</strong></p><ul><li><code>@@||example.com^generichide</code> — disables generic cosmetic rules on any pages at <code>example.com</code> and all subdomains.</li></ul><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="generichide-modifier"><strong><code>$genericblock</code></strong><a class="hash-link" href="#generichide-modifier" title="Direktlink zur Überschrift">​</a></h5><p>Disables generic basic rules on pages that correspond to exception rule.</p><p><strong>Examples</strong></p><ul><li><code>@@||example.com^$genericblock</code> — disables generic basic rules on any pages at <code>example.com</code> and all subdomains.</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="advanced-capabilities">Advanced capabilities<a class="hash-link" href="#advanced-capabilities" title="Direktlink zur Überschrift">​</a></h3><ul><li><a href="#important-modifier"><code>$important</code></a></li><li><a href="#badfilter-modifier"><code>$badfilter</code></a></li><li><a href="#replace-modifier"><code>$replace</code></a></li><li><a href="#csp-modifier"><code>$csp</code></a></li><li><a href="#all-modifier"><code>$all</code></a></li><li><a href="#inline-script-modifier"><code>$inline-script</code></a></li><li><a href="#inline-font-modifier"><code>$inline-font</code></a></li><li><a href="#cookie-modifier"><code>$cookie</code></a></li><li><a href="#network-modifier"><code>$network</code></a></li><li><a href="#app-modifier"><code>$app</code></a></li><li><a href="#redirect-modifier"><code>$redirect</code></a></li><li><a href="#redirect-rule-modifier"><code>$redirect-rule</code></a></li><li><a href="#denyallow-modifier"><code>$denyallow</code></a></li><li><a href="#removeparam-modifier"><code>$removeparam</code></a></li><li><a href="#removeheader-modifier"><code>$removeheader</code></a></li><li><a href="#hls-modifier"><code>$hls</code></a></li><li><a href="#jsonprune-modifier"><code>$jsonprune</code></a></li><li><a href="#noop-modifier"><code>noop</code></a></li><li><a href="#empty-modifier"><code>$empty</code> (deprecated)</a></li><li><a href="#mp4-modifier"><code>$mp4</code> (deprecated)</a></li></ul><p>These modifiers are able to completely change the behaviour of basic rules.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="important-modifier"><strong><code>$important</code></strong><a class="hash-link" href="#important-modifier" title="Direktlink zur Überschrift">​</a></h4><p>The <code>$important</code> modifier applied to a rule increases its priority over any other rule without <code>$important</code> modifier. Even over basic exception rules.</p><p><strong>Examples</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">! blocking rule will block all requests despite of the exception rule</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">||example.org^$important</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@@||example.org^</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">! if the exception rule also has `$important` modifier it will prevail, so no requests will not be blocked</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">||example.org^$important</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@@||example.org^$important</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">! if a document-level exception rule is applied to the document, the `$important` modifier will be ignored;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">! so if a request to `example.org` is sent from the `test.org` domain, the blocking rule will not be applied despite it has the `$important` modifier</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">||example.org^$important</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@@||test.org^$document</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="badfilter-modifier"><strong><code>$badfilter</code></strong><a class="hash-link" href="#badfilter-modifier" title="Direktlink zur Überschrift">​</a></h4><p>The rules with the <code>$badfilter</code> modifier disable other basic rules to which they refer. It means that the text of the disabled rule should match the text of the <code>$badfilter</code> rule (without the <code>$badfilter</code> modifier).</p><p><strong>Examples</strong></p><ul><li><code>||example.com$badfilter</code> disables <code>||example.com</code></li><li><code>||example.com$image,badfilter</code> disables <code>||example.com$image</code></li><li><code>@@||example.com$badfilter</code> disables <code>@@||example.com</code></li><li><code>||example.com$domain=domain.com,badfilter</code> disables <code>||example.com$domain=domain.com</code></li></ul><p>Rules with <code>$badfilter</code> modifier can disable other basic rules for specific domains if they fulfill the following conditions:</p><ol><li>The rule has a <code>$domain</code> modifier.</li><li>The rule does not have a negated domain <code>~</code> in <code>$domain</code> modifier value.</li></ol><p>In that case, the <code>$badfilter</code> rule will disable the corresponding rule for domains specified in both the <code>$badfilter</code> and basic rules. Please note that <a href="#wildcard-for-tld">wildcard-TLD logic</a> works here as well.</p><p><strong>Examples</strong></p><ul><li><code>/some$domain=example.com|example.org|example.io</code> is disabled for <code>example.com</code> by <code>/some$domain=example.com,badfilter</code></li><li><code>/some$domain=example.com|example.org|example.io</code> is disabled for <code>example.com</code> and <code>example.org</code> by <code>/some$domain=example.com|example.org,badfilter</code></li><li><code>/some$domain=example.com|example.org</code> and <code>/some$domain=example.io</code> are disabled completely by <code>/some$domain=example.com|example.org|example.io,badfilter</code></li><li><code>/some$domain=example.com|example.org|example.io</code> is disabled completely by <code>/some$domain=example.*,badfilter</code></li><li><code>/some$domain=example.*</code> is disabled for <code>example.com</code> and <code>example.org</code> by <code>/some$domain=example.com|example.org,badfilter</code></li><li><code>/some$domain=example.com|example.org|example.io</code> is NOT disabled for <code>example.com</code> by <code>/some$domain=example.com|~example.org,badfilter</code> because the value of <code>$domain</code> modifier contains a negated domain</li></ul><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>Rules with <code>$badfilter</code> modifier are not supported by AdGuard Content Blocker.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="replace-modifier"><strong><code>$replace</code></strong><a class="hash-link" href="#replace-modifier" title="Direktlink zur Überschrift">​</a></h4><p>This modifier completely changes the rule behavior. If it is applied, the rule will not block the request. The response is going to be modified instead.</p><blockquote><p>You will need some knowledge of regular expressions to use <code>$replace</code> modifier.</p></blockquote><p><strong>Features</strong></p><ul><li><code>$replace</code> rules apply to any text response, but will not apply to binary (<code>media</code>, <code>image</code>, <code>object</code>, etc).</li><li><code>$replace</code> rules do not apply if the size of the original response is more than 3MB.</li><li><code>$replace</code> rules have a higher priority than other basic rules (<strong>including</strong> exception rules). So if a request corresponds to two different rules one of which has the <code>$replace</code> modifier, this rule will be applied.</li><li>Document-level exception rules with <code>$content</code> or <code>$document</code> modifiers do disable <code>$replace</code> rules for requests matching them.</li><li>Other document-level exception rules (<code>$generichide</code>, <code>$elemhide</code> or <code>$jsinject</code> modifiers) are applied alongside <code>$replace</code> rules. It means that you can modify the page content with a <code>$replace</code> rule and disable cosmetic rules there at the same time.</li></ul><blockquote><p><code>$replace</code> value can be empty in the case of exception rules. See examples section for further information.</p></blockquote><blockquote><p><strong>Multiple rules matching a single request</strong></p><p>In case if multiple <code>$replace</code> rules match a single request, we will apply each of them. <strong>The order is defined alphabetically.</strong></p></blockquote><p><strong>Syntax</strong></p><p>In general, <code>$replace</code> syntax is similar to replacement with regular expressions <a href="http://perldoc.perl.org/perlrequick.html#Search-and-replace" target="_blank" rel="noopener noreferrer">in Perl</a>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">replace = &quot;/&quot; regexp &quot;/&quot; replacement &quot;/&quot; modifiers</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong><code>regexp</code></strong> — a regular expression.</li><li><strong><code>replacement</code></strong> — a string that will be used to replace the string corresponding to <code>regexp</code>.</li><li><strong><code>modifiers</code></strong> — a regular expression flags. For example, <code>i</code> — insensitive search, or <code>s</code> — single-line mode.</li></ul><p>In the <code>$replace</code> value, two characters must be escaped: comma <code>,</code> and dollar sign <code>$</code>. Use backslash <code>\</code> for it. For example, an escaped comma looks like this: <code>\,</code>.</p><p><strong>Examples</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">||example.org^$replace=/(&lt;VAST[\s\S]*?&gt;)[\s\S]*&lt;\/VAST&gt;/\$1&lt;\/VAST&gt;/i</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>There are three parts in this rule:</p><ul><li><code>regexp</code> - <code>(&lt;VAST(.|\s)*?&gt;)(.|\s)*&lt;\/VAST&gt;</code>;</li><li><code>replacement</code> — <code>\$1&lt;\/VAST&gt;</code> where <code>$</code> is escaped;</li><li><code>modifiers</code> — <code>i</code> for insensitive search.</li></ul><p>You can see how this rule works here: <a href="http://regexr.com/3cesk" target="_blank" rel="noopener noreferrer">http://regexr.com/3cesk</a></p><p><strong>Multiple <code>$replace</code> rules</strong></p><ol><li><code>||example.org^$replace=/X/Y/</code></li><li><code>||example.org^$replace=/Z/Y/</code></li><li><code>@@||example.org/page/*$replace=/Z/Y/</code></li></ol><ul><li>Both rule 1 and 2 will be applied to all requests sent to <code>example.org</code>.</li><li>Rule 2 is disabled for requests matching <code>||example.org/page/</code>, <strong>but rule 1 still works!</strong></li></ul><p><strong>Disabling <code>$replace</code> rules</strong></p><ul><li><code>@@||example.org^$replace</code> will disable all <code>$replace</code> rules matching <code>||example.org^</code>.</li><li><code>@@||example.org^$document</code> or <code>@@||example.org^$content</code> will disable all <code>$replace</code> rules <strong>originated from</strong> pages of <code>example.org</code> <strong>including the page itself</strong>.</li></ul><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>Rules with <code>$replace</code> modifier are supported by AdGuard for Windows, Mac, Android, and AdGuard Browser extension for Firefox. Such rules do not work in extensions for other browsers because they are unable to modify content on the network level.</p></blockquote><blockquote><p><strong>Restrictions</strong></p><p>Rules with <code>$replace</code> modifier can be used <a href="#trusted-filters"><strong>only in trusted filters</strong></a>.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="csp-modifier"><strong><code>$csp</code></strong><a class="hash-link" href="#csp-modifier" title="Direktlink zur Überschrift">​</a></h4><p>This modifier completely changes the rule behavior. If it is applied to a rule, it will not block the matching request. The response headers are going to be modified instead.</p><blockquote><p>In order to use this type of rules, it is required to have the basic understanding of the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy" target="_blank" rel="noopener noreferrer">Content Security Policy</a> security layer.</p></blockquote><p>For the requests matching a <code>$csp</code> rule, we will strengthen response security policy by enhancing the content security policy, similar to the content security policy of the <code>$csp</code> modifier contents. <code>$csp</code> rules are applied independently from any other rule type. Other basic rules have no influence on it <strong>save for document-level exceptions</strong> (see the examples section below).</p><blockquote><p><strong>Multiple rules matching a single request</strong></p><p>In case if multiple <code>$csp</code> rules match a single request, we will apply each of them.</p></blockquote><p><strong>Syntax</strong></p><p><code>$csp</code> value syntax is similar to the Content Security Policy header syntax.</p><p><code>$csp</code> value can be empty in the case of exception rules. See examples section below.</p><blockquote><p><strong>Limitations</strong></p><ol><li>There are a few characters forbidden in the <code>$csp</code> value: <code>,</code>, <code>$</code>.</li><li><code>$csp</code> rules support limited list of modifiers: <code>$domain</code>, <code>$important</code>, <code>$subdocument</code>.</li><li>Rules with <code>report-*</code> directives are considered invalid.</li></ol></blockquote><p><strong>Examples</strong></p><ul><li><code>||example.org^$csp=frame-src &#x27;none&#x27;</code> blocks all frames on example.org and its subdomains.</li><li><code>@@||example.org/page/*$csp=frame-src &#x27;none&#x27;</code> disables all rules with the <code>$csp</code> modifier exactly matching <code>frame-src &#x27;none&#x27;</code> on all the pages matching the rule pattern. For instance, the rule above.</li><li><code>@@||example.org/page/*$csp</code> disables all the <code>$csp</code> rules on all the pages matching the rule pattern.</li><li><code>||example.org^$csp=script-src &#x27;self&#x27; &#x27;unsafe-eval&#x27; http: https:</code> disables inline scripts on all the pages matching the rule pattern.</li><li><code>@@||example.org^$document</code> or <code>@@||example.org^$urlblock</code> disables all the <code>$csp</code> rules on all the pages matching the rule pattern.</li></ul><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>Rules with <code>$csp</code> modifier are not supported by AdGuard Content Blocker, AdGuard for iOS and Safari.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="permissions-modifier"><strong><code>$permissions</code></strong><a class="hash-link" href="#permissions-modifier" title="Direktlink zur Überschrift">​</a></h4><p>This modifier completely changes the rule behavior. If it is applied to a rule, it will not block the matching request. The response headers are going to be modified instead.</p><blockquote><p>In order to use this type of rules, it is required to have the basic understanding of the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Feature_Policy" target="_blank" rel="noopener noreferrer">Feature Policy</a> security layer.</p></blockquote><p>For the requests matching a <code>$permissions</code> rule, AdGuard strengthens response&#x27;s feature policy by adding additional feature policy equal to the <code>$permissions</code> modifier contents. <code>$permissions</code> rules are applied independently from any other rule type. Other basic rules have no influence on it <strong>save for document-level exceptions</strong> (see the examples section).</p><blockquote><p><strong>Multiple rules matching a single request.</strong></p><p>In case if multiple <code>$permissions</code> rules match a single request, AdGuard will apply each of them.</p></blockquote><p><strong>Syntax</strong></p><p><code>$permissions</code> value syntax is similar to the <code>Permissions-Policy</code> (or <code>Feature-Policy</code>) header <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Permissions-Policy" target="_blank" rel="noopener noreferrer">syntax</a>. The list of the available directives is available <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Permissions-Policy#directives" target="_blank" rel="noopener noreferrer">here</a>.</p><p><code>$permissions</code> value can be empty in the case of exception rules — see examples below.</p><blockquote><p><strong>Limitations</strong></p><ol><li>Two characters are forbidden in the <code>$permissions</code> value: <code>,</code> and <code>$</code>;</li><li><code>$permissions</code> is compatible with the limited list of modifiers: <code>$domain</code>, <code>$important</code>, and <code>$subdocument</code>.</li></ol></blockquote><p><strong>Examples</strong></p><ul><li><code>||example.org^$permissions=sync-xhr &#x27;none&#x27;</code> disallows synchronous <code>XMLHttpRequest</code> requests across <code>example.org</code>.</li><li><code>@@||example.org/page/*$permissions=sync-xhr &#x27;none&#x27;</code> disables all rules with the <code>$permissions</code> modifier exactly matching <code>sync-xhr &#x27;none&#x27;</code> on all the pages matching the rule pattern. For instance, the rule above.</li><li><code>@@||example.org/page/*$permissions</code> disables all the <code>$permissions</code> rules on all the pages matching the rule pattern.</li><li><code>$domain=example.org|example.com,permission=oversized-images &#x27;none&#x27;; sync-script &#x27;none&#x27;; unsized-media &#x27;none&#x27;;</code> disallows oversized images, synchronous scripts and unsized media features across <code>example.org</code> and <code>example.com</code>.</li><li><code>@@||example.org^$document</code> or <code>@@||example.org^$urlblock</code> disables all the <code>$permission</code> rules on all the pages matching the rule pattern.</li></ul><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>Rules with the <code>$permissions</code> modifier are supported by AdGuard for Windows, Mac, and Android, <strong>running CoreLibs version 1.11 or later</strong>.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="all-modifier"><strong><code>$all</code></strong><a class="hash-link" href="#all-modifier" title="Direktlink zur Überschrift">​</a></h4><p><code>$all</code> modifier is made of <a href="#document-modifier"><code>$document</code></a>, <a href="#popup-modifier"><code>$popup</code></a>, <a href="#csp-modifier"><code>$csp</code></a> modifiers. E.g. rule <code>||example.org^$all</code> is converting into such set of rules:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">||example.org^$document,popup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">||example.org^$csp=script-src &#x27;self&#x27; &#x27;unsafe-eval&#x27; http: https: data: blob: mediastream: filesystem:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">||example.org^$csp=font-src &#x27;self&#x27; &#x27;unsafe-eval&#x27; http: https: data: blob: mediastream: filesystem:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">||example.org^</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="inline-script-modifier"><strong><code>$inline-script</code></strong><a class="hash-link" href="#inline-script-modifier" title="Direktlink zur Überschrift">​</a></h4><p><code>$inline-script</code> modifier is a sort of a shortcut for <a href="#csp-modifier"><code>$csp</code></a> modifier with specific value. E.g. the rule <code>||example.org^$inline-script</code> is converting into such a rule:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">||example.org^$csp=script-src &#x27;self&#x27; &#x27;unsafe-eval&#x27; http: https: data: blob: mediastream: filesystem:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="inline-font-modifier"><strong><code>$inline-font</code></strong><a class="hash-link" href="#inline-font-modifier" title="Direktlink zur Überschrift">​</a></h4><p><code>$inline-font</code> modifier is a sort of a shortcut for <a href="#csp-modifier"><code>$csp</code></a> modifier with specific value. E.g. the rule <code>||example.org^$inline-font</code> is converting into such a rule:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">||example.org^$csp=font-src &#x27;self&#x27; &#x27;unsafe-eval&#x27; http: https: data: blob: mediastream: filesystem:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cookie-modifier"><strong><code>$cookie</code></strong><a class="hash-link" href="#cookie-modifier" title="Direktlink zur Überschrift">​</a></h4><p>The <code>$cookie</code> modifier completely changes rule behavior. Instead of blocking a request, this modifier makes us suppress or modify the <code>Cookie</code> and <code>Set-Cookie</code> headers.</p><blockquote><p><strong>Multiple rules matching a single request</strong></p><p>In case if multiple <code>$cookie</code> rules match a single request, we will apply each of them one by one.</p></blockquote><p><strong>Syntax</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$cookie [= name[; maxAge = seconds [; sameSite = strategy ]]]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>where:</p><ul><li><strong><code>name</code></strong> — optional, string or regular expression to match cookie name.</li><li><strong><code>seconds</code></strong> — number of seconds for current time to offset the expiration date of cookie.</li><li><strong><code>strategy</code></strong> — string for <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie/SameSite" target="_blank" rel="noopener noreferrer">Same-Site</a> strategy to make cookie use.</li></ul><p>For example</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">||example.org^$cookie=NAME;maxAge=3600;sameSite=lax</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>every time AdGuard encounters a cookie called <code>NAME</code> in a request to <code>example.org</code>, it will do the following:</p><ul><li>Set its expiration date to current time plus <code>3600</code> seconds</li><li>Makes the cookie use <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie/SameSite" target="_blank" rel="noopener noreferrer">Same-Site</a> &quot;lax&quot; strategy.</li></ul><blockquote><p><strong>Escaping special characters</strong></p><p>If regular expression <code>name</code> is used for matching, two characters must be escaped: comma <code>,</code> and dollar sign <code>$</code>. Use  backslash <code>\</code> escape each of them. For example, escaped comma looks like this: <code>\,</code>.</p></blockquote><p><strong>Examples</strong></p><ul><li><code>||example.org^$cookie</code> blocks <strong>all</strong> cookies set by <code>example.org</code>; this is an equivalent to setting <code>maxAge=0</code></li><li><code>$cookie=__cfduid</code> blocks CloudFlare cookie everywhere</li><li><code>$cookie=/__utm[a-z]/</code> blocks Google Analytics cookies everywhere</li><li><code>||facebook.com^$third-party,cookie=c_user</code> prevents Facebook from tracking you even if you are logged in</li></ul><p><code>$cookie</code> rules are not affected by regular exception rules (<code>@@</code>) unless it is a <code>$document</code> exception. In order to disable a <code>$cookie</code> rule, the exception rule should also have a <code>$cookie</code> modifier. How it works:</p><ul><li><code>@@||example.org^$cookie</code> unblocks all cookies set by <code>example.org</code></li><li><code>@@||example.org^$cookie=concept</code> unblocks a single cookie named <code>concept</code></li><li><code>@@||example.org^$cookie=/^_ga_/</code> unblocks every cookie that matches the regular expression</li></ul><blockquote><p><strong>Limitations</strong></p><p><code>$cookie</code> rules support a limited list of modifiers: <code>$domain</code>, <code>$~domain</code>, <code>$important</code>, <code>$third-party</code>, <code>$~third-party</code>.</p></blockquote><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>Rules with <code>$cookie</code> modifier are not supported by AdGuard Content Blocker, AdGuard for iOS and Safari.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="network-modifier"><strong><code>$network</code></strong><a class="hash-link" href="#network-modifier" title="Direktlink zur Überschrift">​</a></h4><p>This is basically a Firewall-kind of rules allowing to fully block or unblock access to a specified remote address.</p><ol><li><code>$network</code> rules match <strong>IP addresses only</strong>! You cannot use them to block or unblock access to a domain.</li><li>To match an IPv6 address, you have to use the collapsed syntax, e.g. use <code>[2001:4860:4860::8888]$network</code> instead of <code>[2001:4860:4860:0:0:0:0:8888]$network</code>.</li><li>An allowlist <code>$network</code> rule makes AdGuard bypass data to the matching endpoint, e.g. there will be no further filtering at all.</li><li>If the IP part starts and ends with <code>/</code> character, it is treated as a regular expression.</li></ol><blockquote><p>We recommend to get acquainted with this <a href="#regexp-support">article</a>, for better understanding of regular expressions.</p></blockquote><p><strong>Examples</strong></p><ul><li><code>174.129.166.49:3478^$network</code> blocks access to <code>174.129.166.49:3478</code> (but not to <code>174.129.166.49:34788</code>).</li><li><code>[2001:4860:4860::8888]:443^$network</code> blocks access to <code>[2001:4860:4860::8888]:443</code>.</li><li><code>174.129.166.49$network</code> blocks access to <code>174.129.166.49:*</code>.</li><li><code>@@174.129.166.49$network</code> makes AdGuard bypass data to the endpoint. No other rules will be applied.</li><li><code>/.+:3[0-9]{4}/$network</code> blocks access to any port from 30000 to 39999.</li><li><code>/8.8.8.(:?8|4)/$network</code> blocks access to both <code>8.8.8.8</code> and <code>8.8.8.4</code>.</li></ul><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>Only AdGuard for Windows, Mac, Android are technically capable of using rules with <code>$network</code> modifier.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="app-modifier"><strong><code>$app</code></strong><a class="hash-link" href="#app-modifier" title="Direktlink zur Überschrift">​</a></h4><p>This modifier lets you narrow the rule coverage down to a specific application (or a list of applications). This might be not too important on Windows and Mac, but this is very important on mobile where some of the filtering rules must be application-specific.</p><ul><li>Android — use the app package name, e.g. <code>org.example.app</code>.</li><li>Windows — use the process name, e.g. <code>chrome.exe</code>.</li><li>Mac — use the bundle ID or the process name, e.g. <code>com.google.Chrome</code>.</li></ul><blockquote><p>For Mac, you can find out the bundle ID or the process name of the app by viewing the respective request details in the Filtering log.</p></blockquote><p><strong>Examples</strong></p><ul><li><code>||baddomain.com^$app=org.example.app</code> — a rule to block requests that match the specified mask, and are sent from the <code>org.example.app</code> Android app.</li><li><code>||baddomain.com^$app=org.example.app1|org.example.app2</code> — the same rule, but it works for both <code>org.example.app1</code> and <code>org.example.app2</code> apps.</li></ul><p>If you want the rule not to be applied to certain apps, start the app name with <code>~</code> sign.</p><ul><li><code>||baddomain.com^$app=~org.example.app</code> — a rule to block requests that match the specified mask, and are sent from any app save for the <code>org.example.app</code>.</li><li><code>||baddomain.com^$app=~org.example.app1|~org.example.app2</code> — same as above, but now two apps are excluded: <code>org.example.app1</code> and <code>org.example.app2</code>.</li></ul><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>Only AdGuard for Windows, Mac, Android are technically capable of using rules with <code>$app</code> modifier.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="redirect-modifier"><strong><code>$redirect</code></strong><a class="hash-link" href="#redirect-modifier" title="Direktlink zur Überschrift">​</a></h4><p>AdGuard is able to redirect web requests to a local &quot;resource&quot;.</p><p><strong>Syntax</strong></p><p>AdGuard uses the same filtering rules syntax as uBlock Origin. Also, it is compatible with ABP <code>$rewrite=abp-resource</code> modifier.</p><p><code>$redirect</code> is a modifier for the <a href="#basic-rules">basic filtering rules</a> so rules with this modifier support all other basic modifiers like <code>$domain</code>, <code>$third-party</code>, <code>$script</code>, etc.</p><blockquote><p>The value of the <code>$redirect</code> modifier must be the name of the resource that will be used for redirection.</p></blockquote><blockquote><p><code>$redirect</code> rules&#x27; priority is higher than the regular basic blocking rules&#x27; priority. This means that if there is a basic blocking rule (even with <code>$important</code> modifier), <code>$redirect</code> rule will prevail over it. If there is an allowlist (<code>@@</code>) rule matching the same URL, it will disable redirecting as well (unless the <code>$redirect</code> rule is also marked as <code>$important</code>).</p></blockquote><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="disabling-redirect-rules">Disabling <code>$redirect</code> rules<a class="hash-link" href="#disabling-redirect-rules" title="Direktlink zur Überschrift">​</a></h5><ul><li><code>||example.org/script.js$script,redirect=noopjs</code> — this rule redirects all requests to <code>example.org/script.js</code> to the resource named <code>noopjs</code>.</li><li><code>||example.org/test.mp4$media,redirect=noopmp4-1s</code> — this rule redirects all requests to <code>example.org/test.mp4</code> to the resource named <code>noopmp4-1s</code>.</li><li><code>@@||example.org^$redirect</code> will disable all <code>$redirect</code> rules for URLs that match <code>||example.org^</code>.</li><li><code>@@||example.org^$redirect=nooptext</code> will disable all rules with <code>$redirect=nooptext</code> for any request that matches <code>||example.org^</code>.</li></ul><blockquote><p>More information on redirects and their usage is available <a href="https://github.com/AdguardTeam/Scriptlets#redirect-resources" target="_blank" rel="noopener noreferrer">on GitHub</a>.</p></blockquote><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>Rules with <code>$redirect</code> modifier are not supported by AdGuard Content Blocker, AdGuard for iOS and Safari.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="redirect-rule-modifier"><strong><code>$redirect-rule</code></strong><a class="hash-link" href="#redirect-rule-modifier" title="Direktlink zur Überschrift">​</a></h4><p>This is basically an alias to <a href="#redirect-modifier"><code>$redirect</code></a> since it has the same &quot;redirection&quot; values and the logic is almost similar. The difference is that <code>$redirect-rule</code> is applied only in the case when the target request is blocked by a different basic rule.</p><blockquote><p>Negating <code>$redirect-rule</code> works exactly the same way as for regular <code>$redirect</code> rules. Even more than that, <code>@@||example.org^$redirect</code> will negate both <code>$redirect</code> and <code>$redirect-rule</code> rules.</p></blockquote><p><strong>Examples</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">||example.org/script.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">||example.org^$redirect-rule=noopjs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this case, only requests to <code>example.org/script.js</code> will be &quot;redirected&quot; to <code>noopjs</code>. All other requests to <code>example.org</code> will be kept intact.</p><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>Rules with <code>$redirect-rule</code> modifier are not supported by AdGuard Content Blocker, AdGuard for iOS and Safari.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="denyallow-modifier"><strong><code>$denyallow</code></strong><a class="hash-link" href="#denyallow-modifier" title="Direktlink zur Überschrift">​</a></h4><p><code>$denyallow</code> modifier allows to avoid creating additional rules when it is needed to disable a certain rule for specific domains. <code>$denyallow</code> matches only target domains and not referrer domains.</p><p>Adding this modifier to a rule is equivalent to excluding the domains by the rule&#x27;s matching pattern or to adding the corresponding exclusion rules. To add multiple domains to one rule, use the <code>|</code>  character as a separator.</p><blockquote><p><strong>Restrictions</strong></p><ul><li>The rule&#x27;s matching pattern cannot target any specific domains, e.g. it cannot start with <code>||</code>.</li><li>Domains in the modifier value cannot be negated, e.g. <code>$denyallow=~x.com</code>, or have a wildcard TLD, e.g. <code>$denyallow=x.*</code>.</li></ul><p>The rules which violate these restrictions are considered invalid.</p></blockquote><p><strong>Examples</strong></p><p>This rule:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">*$script,domain=a.com|b.com,denyallow=x.com|y.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>is equivalent to this one:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/^(?!.*(x.com|y.com)).*$/$script,domain=a.com|b.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>or to the combination of these three:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">*$script,domain=a.com|b.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@@||x.com$script,domain=a.com|b.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@@||y.com$script,domain=a.com|b.com</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>Rules with <code>$denyallow</code> modifier are not supported by AdGuard Content Blocker.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="removeparam-modifier"><strong><code>$removeparam</code></strong><a class="hash-link" href="#removeparam-modifier" title="Direktlink zur Überschrift">​</a></h4><blockquote><p><code>$queryprune</code> is an alias of <code>$removeparam</code>. Since <code>$queryprune</code> is deprecated, avoid using it and use <code>$removeparam</code> instead.</p></blockquote><p>Rules with <code>$removeparam</code> modifier are intended to strip query parameters from requests&#x27; URLs. Please note that such rules are only applied to <code>GET</code>, <code>HEAD</code>, <code>OPTIONS</code>, and <a href="#removeparam-modifier-compatibility">sometimes</a> <code>POST</code> requests.</p><blockquote><p><code>$removeparam</code> rules that do not have any <a href="#content-type-modifiers">content type modifiers</a> will match only requests where content type is <code>document</code>.</p></blockquote><p><strong>Syntax</strong></p><p><strong>Basic syntax</strong></p><ul><li><code>$removeparam=param</code> — removes query parameter with the name <code>param</code> from URLs of any request, e.g. a request to <code>http://example.com/page?param=1&amp;another=2</code> will be transformed to <code>http://example.com/page?another=2</code>.</li></ul><blockquote><p><code>$removeparam</code> basic syntax is supported starting with v1.7 of <a href="https://adguard.com/en/blog/introducing-corelibs.html" target="_blank" rel="noopener noreferrer">CoreLibs</a> and v3.6 of AdGuard Browser Extension.</p></blockquote><p><strong>Regular expressions</strong></p><p>You can also use regular expressions to match query parameters and/or their values:</p><ul><li><code>$removeparam=/regexp/[options]</code> — removes query parameters that matches the <code>regexp</code> regular expression from URLs of any request. Unlike basic syntax, it means <em>&quot;remove query parameters normalized to a <code>name=value</code> string which match the <code>regexp</code> regular expression&quot;</em>. <code>[options]</code> here is the list of regular expression options. At the moment, the only supported option is <code>i</code> which makes matching case-insensitive.</li></ul><blockquote><p><code>$removeparam</code> syntax for regular expressions will be supported starting with v1.8 of CoreLibs and v4.0 of AdGuard Browser Extension. For now, use the simplified version: <code>$removeparam=param</code>.</p></blockquote><blockquote><p><strong>Escaping special characters</strong></p><p>Do not forget to escape special characters like <code>,</code>, <code>/</code> and <code>$</code> in the regular expressions. Use <code>\</code> character for that purpose. For example, an escaped comma should look like this: <code>\,</code>.</p></blockquote><blockquote><p><strong>Note</strong></p><p>Regexp-type rules target both name and value of the parameter. In order to minimize the chance of mistakes, it is safer to start every regexp with <code>/^</code> unless you specifically target parameter values.</p></blockquote><blockquote><p>We will try to detect and ignore unescaped <code>$</code> automatically using a simple rule of thumb: It is not an options delimiter if all three are true: 1. It looks like <code>$/</code>; 2. There is another slash character <code>/</code> to the left of it; 3. There is another unescaped dollar sign <code>$</code> to the left of that slash character.</p></blockquote><p><strong>Remove all query parameters</strong></p><p>Specify naked <code>$removeparam</code> to remove all query parameters:</p><ul><li><code>||example.org^$removeparam</code> — removes all query parameters from URLs matching <code>||example.org^</code>.</li></ul><p><strong>Inversion</strong></p><p>Use <code>~</code> to apply inversion:</p><ul><li><code>$removeparam=~param</code> — removes all query parameters with the name different from <code>param</code>.</li><li><code>$removeparam=~/regexp/</code> — removes all query parameters that do not match the <code>regexp</code> regular expression.</li></ul><p><strong>Negating <code>$removeparam</code></strong></p><p>This sort of rules work pretty much the same way it works with <a href="#csp-modifier"><code>$csp</code></a> and <a href="#redirect-modifier"><code>$redirect</code></a> modifiers.</p><p>Use <code>@@</code> to negate <code>$removeparam</code>:</p><ul><li><code>@@||example.org^$removeparam</code> negates all <code>$removeparam</code> rules for URLs that match <code>||example.org^</code>.</li><li><code>@@||example.org^$removeparam=param</code> negates the rule with <code>$removeparam=param</code> for any request matching <code>||example.org^</code>.</li><li><code>@@||example.org^$removeparam=/regexp/</code> negates the rule with <code>$removeparam=/regexp/</code> for any request matching <code>||example.org^</code>.</li></ul><blockquote><p><strong>Multiple rules matching a single request</strong></p><p>In the case when multiple <code>$removeparam</code> rules match a single request, each of them will be applied one by one.</p></blockquote><p><strong>Examples</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$removeparam=/^(utm_source|utm_medium|utm_term)=/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$removeparam=/^(utm_content|utm_campaign|utm_referrer)=/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@@||example.com^$removeparam</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>With these rules some <a href="https://en.wikipedia.org/wiki/UTM_parameters" target="_blank" rel="noopener noreferrer">UTM parameters</a> will be stripped out from any request, except that requests to <code>example.com</code> will not be stripped at all, e.g. <code>http://google.com/page?utm_source=s&amp;utm_referrer=fb.com&amp;utm_content=img</code> will be transformed to <code>http://google.com/page</code>, but <code>http://example.com/page?utm_source=s&amp;utm_referrer=fb.com&amp;utm_content=img</code> will not be affected by the blocking rule.</p><ul><li><p><code>$removeparam=utm_source</code> — removes <code>utm_source</code> query parameter from all requests.</p></li><li><p><code>$removeparam=/utm_.*/</code> — removes all <code>utm_* query</code> parameters from URL queries of any request, e.g. a request to <code>http://example.com/page?utm_source=test</code> will be transformed to <code>http://example.com/page</code>.</p></li><li><p><code>$removeparam=/^utm_source=campaign$/</code> — removes <code>utm_source</code> query parameter with the value equal to <code>campaign</code>. It does not touch other <code>utm_source</code> parameters.</p></li></ul><p><strong>Negating one <code>$removeparam</code> rule and replacing it with a different rule</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$removeparam=/^(gclid|yclid|fbclid)=/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@@||example.com^$removeparam=/^(gclid|yclid|fbclid)=/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">||example.com^$removeparam=/^(yclid|fbclid)=/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>With these rules, Google, Yandex, and Facebook Click IDs will be removed from all requests. There is one exception: Google Click ID (gclid) will not be removed from requests to example.com.</p><p><strong>Negating <code>$removeparam</code> for all parameters</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$removeparam=/^(utm_source|utm_medium|utm_term)=/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$removeparam=/^(utm_content|utm_campaign|utm_referrer)=/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@@||example.com^$removeparam</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>With these rules, specified UTM parameters will be removed from any request save for requests to <code>example.org</code>.</p><blockquote><p><strong>Compatibility with other modifiers</strong></p><p><code>$removeparam</code> rules are compatible with <a href="#basic-rules-common-modifiers">basic modifiers</a>, <a href="#content-type-modifiers">content type modifiers</a>, and with <code>$important</code> and <code>$app</code> modifiers. The rules which have any other modifiers are considered invalid and will be discarded.</p></blockquote><blockquote><p><strong>Note</strong></p><p><code>$removeparam</code> rules can also be disabled by <code>$document</code> and <code>$urlblock</code> exception rules. But basic exception rules without modifiers do not do that. For example, <code>@@||example.com^</code> will not disable <code>$removeparam=p</code> for requests to <strong>example.com</strong>, but <code>@@||example.com^$urlblock</code> will.</p></blockquote><blockquote><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="removeparam-modifier-compatibility"><strong>Compatibility with different versions of AdGuard</strong><a class="hash-link" href="#removeparam-modifier-compatibility" title="Direktlink zur Überschrift">​</a></h5><ul><li><p>Rules with <code>$removeparam</code> modifier are supported by AdGuard for Windows, Mac, Android, and AdGuard browser extensions for Chrome, Firefox, Edge.</p></li><li><p><code>POST</code> request types are supported only by AdGuard for Windows, Mac, and Android, <strong>running CoreLibs version 1.10 or later</strong>.</p></li></ul></blockquote><blockquote><p><strong>Restrictions</strong></p><p>Rules with <code>$removeparam</code> modifier can be used <a href="#trusted-filters"><strong>only in trusted filters</strong></a>.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="removeheader-modifier"><strong><code>$removeheader</code></strong><a class="hash-link" href="#removeheader-modifier" title="Direktlink zur Überschrift">​</a></h4><p>Rules with <code>$removeheader</code> modifier are intended to remove headers from HTTP requests and responses. The initial motivation for this rule type is to be able to get rid of the <code>Refresh</code> header which is often used to redirect users to an undesirable location. However, this is not the only case where this modifier can be useful.</p><p>Just like <code>$csp</code>, <code>$redirect</code>, <code>$removeparam</code>, and <code>$cookie</code>, this modifier exists independently, rules with it do not depend on the regular basic rules, i.e. regular exception or blocking rules will not affect it. By default, it only affects response headers. However, you can also change it to remove headers from HTTP requests as well.</p><p><strong>Syntax</strong></p><p><strong>Basic syntax</strong></p><ul><li><code>||example.org^$removeheader=header-name</code> removes a <strong>response</strong> header called <code>header-name</code></li><li><code>||example.org^$removeheader=request:header-name</code> removes a <strong>request</strong> header called <code>header-name</code></li></ul><blockquote><p><code>$removeheader</code> is case-insensitive, but we suggest always using lower case.</p></blockquote><p><strong>Negating <code>$removeheader</code></strong></p><p>This type of rules works pretty much the same way it works with <code>$csp</code> and <code>$redirect</code> modifiers.</p><p>Use <code>@@</code> to negate <code>$removeheader</code>:</p><ul><li><code>@@||example.org^$removeheader</code> negates <strong>all</strong> <code>$removeheader</code> rules for URLs that match <code>||example.org^</code>.</li><li><code>@@||example.org^$removeheader=header</code> negates the rule with <code>$removeheader=header</code> for any request matching <code>||example.org^</code>.</li></ul><blockquote><p><code>$removeheader</code> rules can also be disabled by <code>$document</code> and <code>$urlblock</code> exception rules. But basic exception rules without modifiers will not do that. For example, <code>@@||example.com^</code> will not disable <code>$removeheader=p</code> for requests to <code>example.com</code>, but <code>@@||example.com^$urlblock</code> will.</p></blockquote><blockquote><p><strong>Multiple rules matching a single request</strong></p><p>In case of multiple <code>$removeheader</code> rules matching a single request, we will apply each of them one by one.</p></blockquote><blockquote><p><strong>Restrictions</strong></p><ol><li><p>This type of rules can be used <a href="#trusted-filters"><strong>only in trusted filters</strong></a>.</p></li><li><p>In order to avoid compromising the security <code>$removeheader</code> cannot remove headers from the list below:</p><ul><li><code>access-control-allow-origin</code></li><li><code>access-control-allow-credentials</code></li><li><code>access-control-allow-headers</code></li><li><code>access-control-allow-methods</code></li><li><code>access-control-expose-headers</code></li><li><code>access-control-max-age</code></li><li><code>access-control-request-headers</code></li><li><code>access-control-request-method</code></li><li><code>origin</code></li><li><code>timing-allow-origin</code></li><li><code>allow</code></li><li><code>cross-origin-embedder-policy</code></li><li><code>cross-origin-opener-policy</code></li><li><code>cross-origin-resource-policy</code></li><li><code>content-security-policy</code></li><li><code>content-security-policy-report-only</code></li><li><code>expect-ct</code></li><li><code>feature-policy</code></li><li><code>origin-isolation</code></li><li><code>strict-transport-security</code></li><li><code>upgrade-insecure-requests</code></li><li><code>x-content-type-options</code></li><li><code>x-download-options</code></li><li><code>x-frame-options</code></li><li><code>x-permitted-cross-domain-policies</code></li><li><code>x-powered-by</code></li><li><code>x-xss-protection</code></li><li><code>public-key-pins</code></li><li><code>public-key-pins-report-only</code></li><li><code>sec-websocket-key</code></li><li><code>sec-websocket-extensions</code></li><li><code>sec-websocket-accept</code></li><li><code>sec-websocket-protocol</code></li><li><code>sec-websocket-version</code></li><li><code>p3p</code></li><li><code>sec-fetch-mode</code></li><li><code>sec-fetch-dest</code></li><li><code>sec-fetch-site</code></li><li><code>sec-fetch-user</code></li><li><code>referrer-policy</code></li><li><code>content-type</code></li><li><code>content-length</code></li><li><code>accept</code></li><li><code>accept-encoding</code></li><li><code>host</code></li><li><code>connection</code></li><li><code>transfer-encoding</code></li><li><code>upgrade</code></li></ul></li><li><p><code>$removeheader</code> rules are not compatible with any other modifiers except <code>$domain</code>, <code>$third-party</code>, <code>$app</code>, <code>$important</code>, <code>$match-case</code>, and <a href="#content-type-modifiers">content type modifiers</a>, e.g. <code>$script</code>, <code>$stylesheet</code>, etc. The rules which have any other modifiers are considered invalid and will be discarded.</p></li></ol></blockquote><p><strong>Examples</strong></p><ul><li><code>||example.org^$removeheader=refresh</code> removes <code>Refresh</code> header from all HTTP responses returned by <code>example.org</code> and its subdomains.</li><li><code>||example.org^$removeheader=request:x-client-data</code> removes <code>X-Client-Data</code> header from all HTTP requests.</li><li>Next block of rules removes <code>Refresh</code> and <code>Location</code> headers from all HTTP responses returned by <code>example.org</code> save for requests to <code>example.org/path/*</code>, for which no headers will be removed:<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">||example.org^$removeheader=refresh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">||example.org^$removeheader=location</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@@||example.org/path/$removeheader</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>Rules with <code>$removeheader</code> modifier are supported by AdGuard for Windows, Mac, Android, and AdGuard Browser extension for Chrome, Firefox, Edge.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="hls-modifier"><strong><code>$hls</code></strong><a class="hash-link" href="#hls-modifier" title="Direktlink zur Überschrift">​</a></h4><p><code>$hls</code> rules modify the response of a matching request. They are intended as a convenient way to remove segments from <a href="https://datatracker.ietf.org/doc/html/rfc8216" target="_blank" rel="noopener noreferrer">HLS playlists (RFC 8216)</a>.</p><blockquote><p><strong>Note</strong></p><p>The word &quot;segment&quot; in this document means either a &quot;Media Segment&quot; or a &quot;playlist&quot; as part of a &quot;Master Playlist&quot;: <code>$hls</code> rules do not distinguish between a &quot;Master Playlist&quot; and a &quot;Media Playlist&quot;.</p></blockquote><p><strong>Syntax</strong></p><ul><li><code>||example.org^$hls=urlpattern</code> removes segments whose URL matches the URL pattern <code>urlpattern</code>. The pattern works just like the one in basic URL rules, however, the characters <code>/</code>, <code>$</code> and <code>,</code> must be escaped with <code>\</code> inside <code>urlpattern</code>.</li><li><code>||example.org^$hls=/regexp/options</code> removes segments where the URL or one of the tags (for certain options, if present) is matched by the regular expression <code>regexp</code>. Available <code>options</code> are:<ul><li><code>t</code> — instead of testing the segment&#x27;s URL, test each of the segment&#x27;s tags against the regular expression. A segment with a matching tag is removed;</li><li><code>i</code> — make the regular expression case-insensitive.</li></ul></li></ul><blockquote><p>The characters <code>/</code>, <code>$</code> and <code>,</code> must be escaped with <code>\</code> inside <code>regexp</code>.</p></blockquote><p><strong>Exceptions</strong></p><p>Basic URL exceptions shall not disable rules with <code>$hls</code> modifier. They can be disabled as described below:</p><ul><li><code>@@||example.org^$hls</code> disables all <code>$hls</code> rules for responses from URLs matching <code>||example.org^</code>.</li><li><code>@@||example.org^$hls=text</code> disables all <code>$hls</code> rules with the value of the <code>$hls</code> modifier equal to <code>text</code> for responses from URLs matching <code>||example.org^</code>.</li></ul><blockquote><p><code>$hls</code> rules can also be disabled by <code>$document</code>, <code>$content</code> and <code>$urlblock</code> exception rules.</p></blockquote><blockquote><p><strong>Restrictions</strong></p><ul><li><code>$hls</code> rules are only allowed in trusted filters.</li><li><code>$hls</code> rules are not compatible with any other modifiers except <code>$domain</code>, <code>$third-party</code>, <code>$app</code>, <code>$important</code>, <code>$match-case</code>, and <code>$xmlhttprequest</code>.</li><li><code>$hls</code> rules only apply to HLS playlists, which are UTF-8 encoded text starting with the line <code>#EXTM3U</code>. Any other response will not be modified by these rules.</li><li><code>$hls</code> rules do not apply if the size of the original response is more than 3 MB.</li></ul></blockquote><blockquote><p><strong>Note</strong></p><p>When multiple <code>$hls</code> rules match the same request, their effect is cumulative.</p></blockquote><p><strong>Examples</strong></p><ul><li><code>||example.org^$hls=\/videoplayback^?*&amp;source=dclk_video_ads</code> removes all segments with the matching URL.</li><li><code>||example.org^$hls=/\/videoplayback\/?\?.*\&amp;source=dclk_video_ads/i</code> achieves more or less the same with a regular expression instead of a URL pattern.</li><li><code>||example.org^$hls=/#UPLYNK-SEGMENT:.*\,ad/t</code> removes all segments which have the matching tag.</li></ul><p><strong>Anatomy of an HLS playlist</strong></p><p>A quick summary of the <a href="https://datatracker.ietf.org/doc/html/rfc8216" target="_blank" rel="noopener noreferrer">specification</a>:</p><ol><li>An HLS playlist is a collection of text lines.</li><li>A line may be empty, a comment (starts with <code>#</code>), a tag (also starts with <code>#</code>, can only be recognized by name) or a URL.</li><li>A URL line is called a &quot;segment&quot;.</li><li>Tags may apply to a single segment, i.e. the first URL line after the tag, to all segments following the tag and until the tag with the same name, or to the whole playlist.</li></ol><p>Some points specific to the operation of <code>$hls</code> rules:</p><ol><li>When a segment is removed, all of the tags that apply only to that segment are also removed.</li><li>When there is a tag that applies to multiple segments, and all of those segments are removed, the tag is also removed.</li><li>Since there is no way to recognize different kinds of tags by syntax, we recognize all of the tags specified by the RFC, plus some non-standard tags that we have seen in the field. Any lines starting with <code>#</code> and not recognized as a tag are passed through without modification, and are not matched against the rules.</li><li>We do not match tags that apply to the whole playlist, and <code>$hls</code> rules can not be used to remove them, since <code>$hls</code> rules are intended for removing segments. If you know what you are doing, you can use <code>$replace</code> rules to remove or rewrite just a single tag from the playlist.</li></ol><p><strong>An example of a transformation done by the rules:</strong></p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Original response</summary><div><div class="collapsibleContent_i85q"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#EXTM3U</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-TARGETDURATION:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF,5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">preroll.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#UPLYNK-SEGMENT:abc123,ad</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#UPLYNK-KEY:aabb1122</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-DISCONTINUITY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF,10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">01.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF,10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">02.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#UPLYNK-SEGMENT:abc123,segment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#UPLYNK-KEY:ccdd2233</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-DISCONTINUITY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF,10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">01.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF,10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">02.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-ENDLIST</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Applied rules</summary><div><div class="collapsibleContent_i85q"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">||example.org^$hls=preroll</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">||example.org^$hls=/#UPLYNK-SEGMENT:.*\,ad/t</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Modified response</summary><div><div class="collapsibleContent_i85q"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#EXTM3U</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-TARGETDURATION:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#UPLYNK-SEGMENT:abc123,segment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#UPLYNK-KEY:ccdd2233</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-DISCONTINUITY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF,10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">01.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF,10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">02.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-ENDLIST</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>Rules with the <code>$hls</code> modifier are supported by AdGuard for Windows, Mac, and Android, <strong>running CoreLibs version 1.10 or later</strong>.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="jsonprune-modifier"><strong><code>$jsonprune</code></strong><a class="hash-link" href="#jsonprune-modifier" title="Direktlink zur Überschrift">​</a></h4><p><code>$jsonprune</code> rules modify the response to a matching request by removing JSON items that match a modified <a href="https://goessner.net/articles/JsonPath/" target="_blank" rel="noopener noreferrer">JSONPath</a> expression. They do not modify responses which are not valid JSON documents.</p><blockquote><p>In AdGuard for Windows, Mac and Android, <strong>running CoreLibs version 1.11 or later</strong>, <code>$jsonprune</code> also supports modifying JSONP (padded JSON) documents.</p></blockquote><p><strong>Syntax</strong></p><ul><li><code>||example.org^$jsonprune=expression</code> removes items that match the modified JSONPath expression <code>expression</code> from the response.</li></ul><blockquote><p>Due to the way rule parsing works, the characters <code>$</code> and <code>,</code> must be escaped with <code>\</code> inside <code>expression</code>.</p></blockquote><p>The modified JSONPath syntax has the following differences from the original:</p><ol><li>Script expressions are not supported.</li><li>The supported filter expressions are:</li></ol><ul><li><code>?(has &lt;key&gt;)</code> — true if the current object has the specified key.</li><li><code>?(key-eq &lt;key&gt; &lt;value&gt;)</code> — true if the current object has the specified key, and its value is equal to the specified value.</li><li><code>?(key-substr &lt;key&gt; &lt;value&gt;)</code> — true if the specified value is a substring of the value of the specified key of the current object.</li></ul><ol start="3"><li>Whitespace outside of double- or single-quoted strings has no meaning.</li><li>Both double- and single-quoted strings can be used.</li><li>Expressions ending with <code>..</code> are not supported.</li><li>Multiple array slices can be specified in square brackets.</li></ol><p>There are various online tools for testing JSONPath expressions, e.g. <a href="https://jsonpath.herokuapp.com/" target="_blank" rel="noopener noreferrer">https://jsonpath.herokuapp.com/</a> <a href="https://jsonpath.com/" target="_blank" rel="noopener noreferrer">https://jsonpath.com/</a></p><p>Keep in mind, though, that all JSONPath implementations on this planet have unique features/quirks and are subtly incompatible with each other.</p><p><strong>Exceptions</strong></p><p>Basic URL exceptions shall not disable rules with <code>$jsonprune</code> modifier. They can be disabled as described below:</p><ul><li><code>@@||example.org^$jsonprune</code> disables all <code>$jsonprune</code> rules for responses from URLs matching <code>||example.org^</code>.</li><li><code>@@||example.org^$jsonprune=text</code> disable all <code>$jsonprune</code> rules with the value of the <code>$jsonprune</code> modifier equal to <code>text</code> for responses from URLs matching <code>||example.org^</code>.</li></ul><blockquote><p><code>$jsonprune</code> rules can also be disabled by <code>$document</code>, <code>$content</code> and <code>$urlblock</code> exception rules.</p></blockquote><blockquote><p><strong>Restrictions</strong></p><ul><li><code>$jsonprune</code> rules are not compatible with any other modifiers except <code>$domain</code>, <code>$third-party</code>, <code>$app</code>, <code>$important</code>, <code>$match-case</code>, and <code>$xmlhttprequest</code>.</li><li><code>$jsonprune</code> rules do not apply if the size of the original response is more than 3 MB.</li></ul></blockquote><blockquote><p><strong>Note</strong></p><p>When multiple <code>$jsonprune</code> rules match the same request, they are sorted in lexicographical order, the first rule is applied to the original response, and each of the remaining rules is applied to the result of applying the previous one.</p></blockquote><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>Rules with the <code>$jsonprune</code> modifier are supported by AdGuard for Windows, Mac and Android, <strong>running CoreLibs version 1.10 or later</strong>.</p></blockquote><p><strong>Examples</strong></p><ul><li><code>||example.org^$jsonprune=\$..[one\, &quot;two three&quot;]</code> removes all occurrences of the keys &quot;one&quot; and &quot;two three&quot; anywhere in the JSON document.</li></ul><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Input</summary><div><div class="collapsibleContent_i85q"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;one&quot;: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;two&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;two three&quot;: 23,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;four five&quot;: 45</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Output</summary><div><div class="collapsibleContent_i85q"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;two&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;four five&quot;: 45</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><ul><li><code>||example.org^$jsonprune=\$.a[?(has ad_origin)]</code> removes all children of <code>a</code> that have an <code>ad_origin</code> key.</li></ul><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Input</summary><div><div class="collapsibleContent_i85q"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;a&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;ad_origin&quot;: &quot;https://example.org&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;b&quot;: 42</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;b&quot;: 1234</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Output</summary><div><div class="collapsibleContent_i85q"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;a&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;b&quot;: 1234</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><ul><li><code>||example.org^$jsonprune=\$.*.*[?(key-eq &#x27;Some key&#x27; &#x27;Some value&#x27;)]</code> removes all items that are at nesting level 3 and have a property &quot;Some key&quot; equal to &quot;Some value&quot;.</li></ul><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Input</summary><div><div class="collapsibleContent_i85q"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;a&quot;: {&quot;b&quot;: {&quot;c&quot;: {&quot;Some key&quot;: &quot;Some value&quot;}, &quot;d&quot;: {&quot;Some key&quot;: &quot;Other value&quot;}}},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;e&quot;: {&quot;f&quot;: [{&quot;Some key&quot;: &quot;Some value&quot;}, {&quot;Some key&quot;: &quot;Other value&quot;}]}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Output</summary><div><div class="collapsibleContent_i85q"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;a&quot;: {&quot;b&quot;: {&quot;d&quot;: {&quot;Some key&quot;: &quot;Other value&quot;}}},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;e&quot;: {&quot;f&quot;: [{&quot;Some key&quot;: &quot;Other value&quot;}]}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><p><strong>Nested JSONPath expressions</strong></p><blockquote><p>In AdGuard for Windows, Mac and Android, <strong>running CoreLibs version 1.11 or later</strong>, JSONPath expressions may be used as keys in filter expressions.</p></blockquote><ul><li><code>||example.org^$jsonprune=\$.elems[?(has &quot;\$.a.b.c&quot;)]</code> removes all children of <code>elems</code> which have a property selectable by the JSONPath expression <code>$.a.b.c</code>.</li></ul><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Input</summary><div><div class="collapsibleContent_i85q"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;elems&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;a&quot;: {&quot;b&quot;: {&quot;c&quot;: 123}},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;k&quot;: &quot;v&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;d&quot;: {&quot;e&quot;: {&quot;f&quot;: 123}},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;k1&quot;: &quot;v1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Output</summary><div><div class="collapsibleContent_i85q"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;elems&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;d&quot;: {&quot;e&quot;: {&quot;f&quot;: 123}},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;k1&quot;: &quot;v1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><ul><li><code>||example.org^$jsonprune=\$.elems[?(key-eq &quot;\$.a.b.c&quot; &quot;abc&quot;)]</code> removes all children of <code>elems</code> which have a property selectable by the JSONPath expression <code>$.a.b.c</code> with a value equal to <code>&quot;abc&quot;</code>.</li></ul><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Input</summary><div><div class="collapsibleContent_i85q"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;elems&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;a&quot;: {&quot;b&quot;: {&quot;c&quot;: 123}},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;a&quot;: {&quot;b&quot;: {&quot;c&quot;: &quot;abc&quot;}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Output</summary><div><div class="collapsibleContent_i85q"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;elems&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;a&quot;: {&quot;b&quot;: {&quot;c&quot;: 123}}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="noop-modifier"><strong><code>noop</code></strong><a class="hash-link" href="#noop-modifier" title="Direktlink zur Überschrift">​</a></h4><p><code>noop</code> modifier does nothing and can be used solely to increase rules&#x27; readability. It consists of a sequence of underscore characters (<code>_</code>) of any length and can appear in a rule as many times as needed.</p><p><strong>Examples</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">||example.com$_,removeparam=/^ss\\$/,_,image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">||example.com$replace=/bad/good/,___,~third-party</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>Rules with <code>noop</code> modifier are not supported by AdGuard Content Blocker.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="empty-modifier"><strong><code>$empty</code> (deprecated)</strong><a class="hash-link" href="#empty-modifier" title="Direktlink zur Überschrift">​</a></h4><blockquote><p><strong>Deprecation notice</strong></p><p>This modifier is deprecated in favor of the <a href="#redirect-modifier"><code>$redirect</code> modifier</a>. Rules with <code>$empty</code> are converting into <code>$redirect=nooptext</code> now.</p></blockquote><p>Usually, blocked requests look like a server error to browser. If you use <code>$empty</code> modifier, AdGuard will emulate a blank response from the server with<code>200 OK</code> status.</p><p><strong>Examples</strong></p><ul><li><code>||example.org^$empty</code> returns an empty response to all requests to <code>example.org</code> and all subdomains.</li></ul><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>Rules with <code>$empty</code> modifier are not supported by AdGuard Content Blocker, AdGuard for iOS and Safari.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="mp4-modifier"><strong><code>$mp4</code> (deprecated)</strong><a class="hash-link" href="#mp4-modifier" title="Direktlink zur Überschrift">​</a></h4><blockquote><p><strong>Deprecation notice</strong></p><p>This modifier is deprecated in favor of the <a href="#redirect-modifier"><code>$redirect</code> modifier</a>. Rules with <code>$mp4</code> are converting into <code>$redirect=noopmp4-1s,media</code> now.</p></blockquote><p>As a response to blocked request AdGuard returns a short video placeholder.</p><p><strong>Examples</strong></p><ul><li><code>||example.com/videos/$mp4</code> blocks all video downloads from <code>||example.com/videos/*</code> and changes the response to a video placeholder.</li></ul><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>Rules with <code>$mp4</code> modifier are not supported by AdGuard Content Blocker, AdGuard for iOS and Safari.</p></blockquote><h1>Non-basic rules</h1><p>However, the capabilities of the basic rules may not be sufficient to block ads. Sometimes you need to hide an element or change part of the HTML code of a web page without breaking anything. The rules described in this section are created specifically for this purpose.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cosmetic-rules">Cosmetic rules<a class="hash-link" href="#cosmetic-rules" title="Direktlink zur Überschrift">​</a></h2><blockquote><p>Work with non-basic rules requires the basic knowledge of HTML and CSS. So, if you want to learn how to make such rules, we recommend to get acquainted with <a href="https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Getting_started/What_is_CSS" target="_blank" rel="noopener noreferrer">this documentation</a>.</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cosmetic-elemhide-rules">Element hiding rules<a class="hash-link" href="#cosmetic-elemhide-rules" title="Direktlink zur Überschrift">​</a></h3><p>Element hiding rules are used to hide the elements of web pages. It is similar to applying <code>{ display: none; }</code> style to selected element.</p><blockquote><p>Element hiding rules may operate differently <a href="#cosmetic-rules-priority">depending on the platform</a>.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="non-basic-rules-modifiers-syntax">Syntax<a class="hash-link" href="#non-basic-rules-modifiers-syntax" title="Direktlink zur Überschrift">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   rule = [domains] &quot;##&quot; selector</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">domains = [domain0, domain1[, ...[, domainN]]]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong><code>selector</code></strong> — <a href="https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Getting_Started/Selectors" target="_blank" rel="noopener noreferrer">CSS selector</a>, defines the elements to be hidden.</li><li><strong><code>domains</code></strong> — domain restriction for the rule.</li></ul><p>If you want to limit the rule application area to certain domains, just enter them separated with commas. For example: <code>example.org,example.com##selector</code>.</p><blockquote><p>This rule will be also applied to all subdomains of <code>example.org</code> and <code>example.com</code>.</p></blockquote><p>If you want the rule not to be applied to certain domains, start a domain name with <code>~</code> sign. For example: <code>~example.org##selector</code>.</p><p>You can use both approaches in a single rule. For example, <code>example.org,~subdomain.example.org##domain</code> will work for <code>example.org</code> and all subdomains, <strong>except <code>subdomain.example.org</code></strong>.</p><blockquote><p><strong>Note</strong></p><p>Element hiding rules are not dependent on each other. If there is a rule <code>example.org##selector</code> in the filter and you add <code>~example.org##selector</code> both rules will be applied independently.</p></blockquote><p><strong>Examples</strong></p><ul><li><code>example.com##div.textad</code> — hides a <code>div</code> with a class <code>textad</code> at <code>example.com</code> and all subdomains.</li><li><code>example.com,example.org###adblock</code> — hides an element with attribute <code>id</code> equals <code>adblock</code> at <code>example.com</code>, <code>example.org</code> and all subdomains.</li><li><code>~example.com##.textad</code> — hides an element with a class <code>textad</code> at all domains, except <code>example.com</code> and its subdomains.</li></ul><blockquote><p><strong>Limitations</strong></p><p>Safari does not support both permitted and restricted domains. So the rules like <code>example.org,~foo.example.org##.textad</code> are invalid in AdGuard for Safari.</p></blockquote><p><strong>Exceptions</strong></p><p>Exceptions can disable some rules on particular domains. They are very similar to usual exception rules, but instead of <code>##</code> you have to use <code>#@#</code>.</p><p>For example, there is a rule in filter:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">##.textad</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you want to disable it for <code>example.com</code>, you can create an exception rule:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">example.com#@#.textad</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Sometimes, it may be necessary to disable all restriction rules. For example, to conduct tests. To do this, use the exclusion rule without specifying a domain. It will completely disable matching CSS elemhide rule on ALL domains:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#@#.textad</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The same can be achieved by adding this rule:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">*#@#.textad</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We recommend to use this kind of exceptions only if it is not possible to change the hiding rule itself. In other cases it is better to change the original rule, using domain restrictions.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cosmetic-css-rules">CSS rules<a class="hash-link" href="#cosmetic-css-rules" title="Direktlink zur Überschrift">​</a></h3><p>Sometimes, simple hiding of an element is not enough to deal with advertising. For example, blocking an advertising element can just break the page layout. In this case AdGuard can use rules that are much more flexible than hiding rules. With this rules you can basically add any CSS styles to the page.</p><blockquote><p><strong>Restrictions</strong></p><p>Styles that lead to loading any resource are forbidden. Basically, it means that you cannot use any <code>&lt;url&gt;</code> type of value in the style.</p></blockquote><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>CSS rules are not supported by AdGuard Content Blocker.</p></blockquote><blockquote><p>CSS rules may operate differently <a href="#cosmetic-rules-priority">depending on the platform</a>.</p></blockquote><p><strong>Syntax</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">   rule = [domains] &quot;#$#&quot; selector &quot;{&quot; style &quot;}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">domains = [domain0, domain1[, ...[, domainN]]]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong><code>selector</code></strong> — <a href="https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Getting_Started/Selectors" target="_blank" rel="noopener noreferrer">CSS selector</a>, that defines the elements we want to apply the style to.</li><li><strong><code>domains</code></strong> — domain restriction for the rule. Same principles as in <a href="#elemhide-syntax">element hiding rules</a>.</li><li><strong><code>style</code></strong> — CSS style, that we want to apply to selected elements.</li></ul><p><strong>Examples</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">example.com#$#body { background-color: #333!important; }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This rule will apply a style <code>background-color: #333!important;</code> to the <code>body</code> element at <code>example.com</code> and all subdomains.</p><p><strong>Exceptions</strong></p><p>Just like with element hiding, there is a type of rules that disable the selected CSS style rule for particular domains. Exception rules syntax is almost the same, you just have to change <code>#$#</code> to <code>#@$#</code>.</p><p>For example, there is a rule in filter:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#$#.textad { visibility: hidden; }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you want to disable it for <code>example.com</code>, you can create an exception rule:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">example.com#@$#.textad { visibility: hidden; }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We recommend to use this kind of exceptions only if it is not possible to change the CSS rule itself. In other cases it is better to change the original rule, using domain restrictions.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extended-css-selectors">Extended CSS selectors<a class="hash-link" href="#extended-css-selectors" title="Direktlink zur Überschrift">​</a></h3><ul><li><a href="#extended-css-limitations">Limitations</a></li><li><a href="#extended-css-has">Pseudo-class <code>:has()</code></a></li><li><a href="#extended-css-contains">Pseudo-class <code>:contains()</code></a></li><li><a href="#extended-css-matches-css">Pseudo-class <code>:matches-css()</code></a></li><li><a href="#extended-css-matches-attr">Pseudo-class <code>:matches-attr()</code></a></li><li><a href="#extended-css-matches-property">Pseudo-class <code>:matches-property()</code></a></li><li><a href="#extended-css-xpath">Pseudo-class <code>:xpath()</code></a></li><li><a href="#extended-css-nth-ancestor">Pseudo-class <code>:nth-ancestor()</code></a></li><li><a href="#extended-css-upward">Pseudo-class <code>:upward()</code></a></li><li><a href="#remove-pseudos">Pseudo-class <code>:remove()</code> and pseudo-property <code>remove</code></a></li><li><a href="#extended-css-is">Pseudo-class <code>:is()</code></a></li><li><a href="#extended-css-not">Pseudo-class <code>:not()</code></a></li><li><a href="#extended-css-if-not">Pseudo-class <code>:if-not()</code> (deprecated)</a></li></ul><p>CSS 3.0 is not always enough to block ads. To solve this problem AdGuard extends CSS capabilities by adding support for the new pseudo-elements. We have developed a separate <a href="https://github.com/AdguardTeam/ExtendedCss" target="_blank" rel="noopener noreferrer">open-source library</a> for non-standard element selecting and applying CSS styles with extended properties.</p><p>The idea of extended capabilities is an opportunity to match DOM elements with selectors based on their own representation (style, text content, etc.) or relations with other elements. There is also an opportunity to apply styles with non-standard CSS properties.</p><blockquote><p><strong>Application area</strong></p><p>Extended selectors can be used in any cosmetic rule, whether they are <a href="#cosmetic-elemhide-rules">element hiding rules</a> or <a href="#cosmetic-css-rules">CSS rules</a>.</p></blockquote><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>Rules with extended CSS selectors are not supported by AdGuard Content Blocker.</p></blockquote><p><strong>Syntax</strong></p><p>Regardless of the CSS pseudo-classes you are using in the rule, you can use special markers to force applying these rules by ExtendedCss. It is recommended to use these markers for all extended CSS cosmetic rules so that it was easier to find them.</p><p>The syntax for extended CSS rules:</p><ul><li><code>#?#</code> — for element hiding, <code>#@?#</code> — for exceptions</li><li><code>#$?#</code> — for CSS rules, <code>#@$?#</code> — for exceptions</li></ul><p>We <strong>strongly recommend</strong> using these markers any time when you use an extended CSS selector.</p><p><strong>Examples</strong></p><ul><li><code>example.org#?#div:has(&gt; a[target=&quot;_blank&quot;][rel=&quot;nofollow&quot;])</code> — this rule blocks all <code>div</code> elements containing a child node that has a link with the attributes <code>[target=&quot;_blank&quot;][rel=&quot;nofollow&quot;]</code>. The rule applies only to <code>example.org</code> and its subdomains.</li><li><code>example.com#$?#h3:contains(cookies) { display: none!important; }</code> — this rule sets the style <code>display: none!important</code> to all <code>h3</code> elements that contain the word <code>cookies</code>. The rule applies only to <code>example.com</code> and all its subdomains.</li><li><code>example.net#?#.banner:matches-css(width: 360px)</code> — this rule blocks all <code>.banner</code> elements with the style property <code>width: 360px</code>. The rule applies only to <code>example.net</code> and its subdomains.</li><li><code>example.net#@?#.banner:matches-css(width: 360px)</code> — this rule will disable the previous rule.</li></ul><blockquote><p>You can apply standard CSS selectors using the ExtendedCss library by using a rule marker <code>#?#</code>, e.g. <code>#?#div.banner</code>.</p></blockquote><p>Learn more about <a href="#selectors-debugging-mode">how to debug extended selectors</a>.</p><blockquote><p><strong>Note</strong></p><p>Some pseudo-classes do not require selector before it. Still adding a <a href="https://www.w3.org/TR/selectors-4/#the-universal-selector" target="_blank" rel="noopener noreferrer">universal selector</a> <code>*</code> makes an extended selector easier to read, even though it has no effect on the matching behavior. So selector <code>#block :has(&gt; .inner)</code> works exactly like <code>#block *:has(&gt; .inner)</code> but second one is more obvious.</p><p>Pseudo-class names are case-insensitive, e.g. <code>:HAS()</code> works as <code>:has()</code>. Still the lower-case names are used commonly.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extended-css-limitations">ExtendedCss Limitations<a class="hash-link" href="#extended-css-limitations" title="Direktlink zur Überschrift">​</a></h4><ol><li><p>CSS <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Comments" target="_blank" rel="noopener noreferrer">comments</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/At-rule" target="_blank" rel="noopener noreferrer">at-rules</a> are not supported.</p></li><li><p>Specific pseudo-class may have its own limitations: <a href="#extended-css-has-limitations"><code>:has()</code></a>, <a href="#extended-css-xpath-limitations"><code>:xpath()</code></a>, <a href="#extended-css-nth-ancestor-limitations"><code>:nth-ancestor()</code></a>, <a href="#extended-css-upward-limitations"><code>:upward()</code></a>, <a href="#extended-css-is-limitations"><code>:is()</code></a>, <a href="#extended-css-not-limitations"><code>:not()</code></a>, and <a href="#extended-css-remove-limitations"><code>:remove()</code></a>.</p></li></ol><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extended-css-has">Pseudo-class <code>:has()</code><a class="hash-link" href="#extended-css-has" title="Direktlink zur Überschrift">​</a></h4><p>Draft CSS 4.0 specification describes the <a href="https://www.w3.org/TR/selectors-4/#relational" target="_blank" rel="noopener noreferrer"><code>:has()</code> pseudo-class</a>. Unfortunately, <a href="https://caniuse.com/css-has" target="_blank" rel="noopener noreferrer">it is not yet supported</a> by all popular browsers.</p><blockquote><p><strong>Note</strong></p><p>Rules with the <code>:has()</code> pseudo-class should use the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:has" target="_blank" rel="noopener noreferrer">native implementation of <code>:has()</code></a> if they use <code>##</code> marker and if it is possible, i.e. with no other extended selectors inside. To force applying of ExtendedCss rules with <code>:has()</code>, use <code>#?#</code>/<code>#$?#</code> marker explicitly.</p></blockquote><blockquote><p><strong>Compatibility with other pseudo-classes</strong></p><p>Synonyms <code>:-abp-has()</code> is supported by ExtendedCss for better compatibility.</p></blockquote><blockquote><p><strong>Deprecation notice</strong></p><p><code>:if()</code> is no longer supported as a synonym for <code>:has()</code>.</p></blockquote><p><strong>Syntax</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[target]:has(selector)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>target</code> — optional, standard or extended CSS selector, can be missed for checking <em>any</em> element</li><li><code>selector</code> — required, standard or extended CSS selector</li></ul><p>The pseudo-class <code>:has()</code> selects the <code>target</code> elements that fit to the <code>selector</code>. Also the <code>selector</code> can start with a combinator.</p><p>A selector list can be set in <code>selector</code> as well. In this case <strong>all</strong> selectors in the list are being matched for now. In the future it will be fixed for <a href="https://www.w3.org/TR/selectors-4/#typedef-forgiving-relative-selector-list" target="_blank" rel="noopener noreferrer"><code>&lt;forgiving-relative-selector-list&gt;</code></a> as argument.</p><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extended-css-has-limitations"><code>:has()</code> limitations<a class="hash-link" href="#extended-css-has-limitations" title="Direktlink zur Überschrift">​</a></h5><blockquote><p>Usage of the <code>:has()</code> pseudo-class is <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=669058#c54" target="_blank" rel="noopener noreferrer">restricted for some cases (2, 3)</a>: - disallow <code>:has()</code> inside the pseudos accepting only compound selectors; - disallow <code>:has()</code> after regular pseudo-elements.</p></blockquote><blockquote><p>Native <code>:has()</code> pseudo-class does not allow <code>:has()</code>, <code>:is()</code>, <code>:where()</code> inside <code>:has()</code> argument to avoid increasing the <code>:has()</code> invalidation complexity (<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=669058#c54" target="_blank" rel="noopener noreferrer">case 1</a>). But ExtendedCss did not have such limitation earlier and filter lists already contain such rules, so we have not added this limitation to ExtendedCss and allow to use <code>:has()</code> inside <code>:has()</code> as it was possible before. To use it, just force ExtendedCss usage by setting <code>#?#</code>/<code>#$?#</code> rule marker.</p></blockquote><blockquote><p>Native implementation does not allow any usage of <code>:scope</code> inside <code>:has()</code> argument (<a href="https://github.com/w3c/csswg-drafts/issues/7211" target="_blank" rel="noopener noreferrer">[1]</a>, <a href="https://github.com/w3c/csswg-drafts/issues/6399" target="_blank" rel="noopener noreferrer">[2]</a>). Still, there are some such rules in filter lists: <code>div:has(:scope &gt; a)</code> which we continue to support by simply converting them to <code>div:has(&gt; a)</code>, as it used to be done previously.</p></blockquote><p><strong>Examples</strong></p><p><code>div:has(.banner)</code> selects all <code>div</code> elements which <strong>include</strong> an element with the <code>banner</code> class:</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- HTML code --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Not selected</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Selected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">span</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">banner</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">inner element</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>div:has(&gt; .banner)</code> selects all <code>div</code> elements which <strong>include</strong> an <code>banner</code> class element as a <em>direct child</em> of <code>div</code>:</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- HTML code --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Not selected</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Selected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">banner</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">child element</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>div:has(+ .banner)</code> selects all <code>div</code> elements <strong>preceding</strong> <code>banner</code> class element which <em>immediately follows</em> the <code>div</code> and both are children of the same parent:</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- HTML code --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Not selected</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Selected</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">banner</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">adjacent sibling</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Not selected</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>div:has(~ .banner)</code> selects all <code>div</code> elements <strong>preceding</strong> <code>banner</code> class element which <em>follows</em> the <code>div</code> but <em>not necessarily immediately</em> and both are children of the same parent:</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- HTML code --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Not selected</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Selected</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Not selected</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">banner</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">general sibling</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>div:has(span, .banner)</code> selects all <code>div</code> elements which <strong>include both</strong> <code>span</code> element and <code>banner</code> class element:</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- HTML code --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Not selected</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Selected</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">child span</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">banner</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">child .banner</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><strong>Compatibility with old syntax</strong></p><p><a href="https://github.com/AdguardTeam/ExtendedCss#old-syntax-has" target="_blank" rel="noopener noreferrer">Backward compatible syntax for <code>:has()</code></a> is supported but <strong>not recommended</strong>.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extended-css-contains">Pseudo-class <code>:contains()</code><a class="hash-link" href="#extended-css-contains" title="Direktlink zur Überschrift">​</a></h4><p>The <code>:contains()</code> pseudo-class principle is very simple: it allows to select the elements that contain specified text or which content matches a specified regular expression. Regexp flags are supported.</p><blockquote><p><strong>Note</strong></p><p>The <code>:contains()</code> pseudo-class uses the <code>textContent</code> element property for matching, not the <code>innerHTML</code>.</p></blockquote><blockquote><p><strong>Compatibility with other pseudo-classes</strong></p><p>Synonyms <code>:-abp-contains()</code> and <code>:has-text()</code> are supported for better compatibility.</p></blockquote><p><strong>Syntax</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[target]:contains(match)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>target</code> — optional, standard or extended CSS selector, can be missed for checking <em>any</em> element</li><li><code>match</code> — required, string or regular expression for matching element <code>textContent</code>. Regular expression flags are supported.</li></ul><p><strong>Examples</strong></p><p>For such DOM:</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- HTML code --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Not selected</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">match</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Selected as IT contains &quot;banner&quot;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Not selected </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">banner</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>the element <code>div#match</code> can be selected by any on these extended selectors:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">! plain text</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">div:contains(banner)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">! regular expression</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">div:contains(/as .* banner/)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">! regular expression with flags</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">div:contains(/it .* banner/gi)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><strong>Note</strong></p><p>Only the <code>div</code> with <code>id=match</code> is selected because the next element does not contain any text, and <code>banner</code> is a part of code, not a text.</p></blockquote><blockquote><p><strong>Compatibility with old syntax</strong></p><p><a href="https://github.com/AdguardTeam/ExtendedCss#old-syntax-contains" target="_blank" rel="noopener noreferrer">Backward compatible syntax for <code>:contains()</code></a> is supported but <strong>not recommended</strong>.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extended-css-matches-css">Pseudo-class <code>:matches-css()</code><a class="hash-link" href="#extended-css-matches-css" title="Direktlink zur Überschrift">​</a></h4><p>The <code>:matches-css()</code> pseudo-class allows to match the element by its current style properties. The work of the pseudo-class is based on using the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle" target="_blank" rel="noopener noreferrer"><code>Window.getComputedStyle()</code></a> method.</p><p><strong>Syntax</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[target]:matches-css([pseudo-element, ] property: pattern)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>target</code> — optional, standard or extended CSS selector, can be missed for checking <em>any</em> element</li><li><code>pseudo-element</code> — optional, valid standard pseudo-element, e.g. <code>before</code>, <code>after</code>, <code>first-line</code>, etc.</li><li><code>property</code> — required, a name of CSS property to check the element for</li><li><code>pattern</code> —  required, a value pattern that is using the same simple wildcard matching as in the basic url filtering rules OR a regular expression. For this type of matching, AdGuard always does matching in a case-insensitive manner. In the case of a regular expression, the pattern looks like <code>/regexp/</code>.</li></ul><blockquote><p><strong>Special characters escaping and unescaping</strong></p><p>For <strong>non-regexp</strong> patterns <code>(</code>,<code>)</code>,<code>[</code>,<code>]</code> must be <strong>unescaped</strong>, e.g. <code>:matches-css(background-image:url(data:*))</code>.</p><p>For <strong>regexp</strong> patterns <code>\</code> should be <strong>escaped</strong>, e.g. <code>:matches-css(background-image: /^url\\(&quot;data:image\\/gif;base64.+/)</code>.</p></blockquote><blockquote><p><strong>Restrictions</strong></p><p>Regexp patterns <strong>do not support</strong> flags.</p></blockquote><p><strong>Examples</strong></p><p>For such DOM:</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- HTML code --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">style</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">text/css</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token style language-css"></span><br></span><span class="token-line" style="color:#393A34"><span class="token style language-css">    </span><span class="token style language-css selector id" style="color:#00009f">#matched</span><span class="token style language-css selector pseudo-element" style="color:#00009f">::before</span><span class="token style language-css"> </span><span class="token style language-css punctuation" style="color:#393A34">{</span><span class="token style language-css"></span><br></span><span class="token-line" style="color:#393A34"><span class="token style language-css">        </span><span class="token style language-css property" style="color:#36acaa">content</span><span class="token style language-css punctuation" style="color:#393A34">:</span><span class="token style language-css"> </span><span class="token style language-css string" style="color:#e3116c">&quot;Block me&quot;</span><span class="token style language-css"></span><br></span><span class="token-line" style="color:#393A34"><span class="token style language-css">    </span><span class="token style language-css punctuation" style="color:#393A34">}</span><span class="token style language-css"></span><br></span><span class="token-line" style="color:#393A34"><span class="token style language-css"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">style</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">matched</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">not-matched</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>the <code>div</code> elements with pseudo-element <code>::before</code> and with specified <code>content</code> property can be selected by any of these extended selectors:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">! string pattern</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">div:matches-css(before, content: block me)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">! string pattern with wildcard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">div:matches-css(before, content: block*)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">! regular expression pattern</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">div:matches-css(before, content: /block me/)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><strong>Compatibility with other pseudo-classes</strong></p><p>Obsolete pseudo-classes <code>:matches-css-before()</code> and <code>:matches-css-after()</code> are no longer recommended but still are supported for better compatibility.</p></blockquote><blockquote><p><strong>Compatibility with old syntax</strong></p><p><a href="https://github.com/AdguardTeam/ExtendedCss#old-syntax-matches-css" target="_blank" rel="noopener noreferrer">Backward compatible syntax for <code>:matches-css()</code></a> is supported but <strong>not recommended</strong>.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extended-css-matches-attr">Pseudo-class <code>:matches-attr()</code><a class="hash-link" href="#extended-css-matches-attr" title="Direktlink zur Überschrift">​</a></h4><p>The <code>:matches-attr()</code> pseudo-class allows to select an element by its attributes, especially if they are randomized.</p><p><strong>Syntax</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[target]:matches-attr(&quot;name&quot;[=&quot;value&quot;])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>target</code> — optional, standard or extended CSS selector, can be missed for checking <em>any</em> element</li><li><code>name</code> — required, simple string <em>or</em> string with wildcard <em>or</em> regular expression for attribute name matching</li><li><code>value</code> — optional, simple string <em>or</em> string with wildcard <em>or</em> regular expression for attribute value matching</li></ul><blockquote><p><strong>Escaping special characters</strong></p><p>For <strong>regexp</strong> patterns <code>&quot;</code> and <code>\</code> should be <strong>escaped</strong>, e.g. <code>div:matches-attr(class=/[\\w]{5}/)</code>.</p></blockquote><blockquote><p><strong>Restrictions</strong></p><p>Regexp patterns <strong>do not support</strong> flags.</p></blockquote><p><strong>Examples</strong></p><p><code>div:matches-attr(&quot;ad-link&quot;)</code> selects the element <code>div#target1</code>:</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- HTML code --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">target1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">ad-link</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">1random23-banner_240x400</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>div:matches-attr(&quot;data-*&quot;=&quot;adBanner&quot;)</code> selects the element <code>div#target2</code>:</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- HTML code --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">target2</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">data-1random23</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">adBanner</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>div:matches-attr(*unit*=/^click$/)</code> selects the element <code>div#target3</code>:</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- HTML code --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">target3</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">random123-unit094</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">click</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>*:matches-attr(&quot;/.{5,}delay$/&quot;=&quot;/^[0-9]*$/&quot;)</code> selects the element <code>#target4</code>:</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- HTML code --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">inner-random23</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">target4</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">nt4f5be90delay</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">1000</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">inner-random23</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extended-css-property">Pseudo-class <code>:matches-property()</code><a class="hash-link" href="#extended-css-property" title="Direktlink zur Überschrift">​</a></h4><p>The <code>:matches-property()</code> pseudo-class allows to select an element by matching its properties.</p><p><strong>Syntax</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[target]:matches-property(&quot;name&quot;[=&quot;value&quot;])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>target</code> — optional, standard or extended CSS selector, can be missed for checking <em>any</em> element</li><li><code>name</code> — required, simple string <em>or</em> string with wildcard <em>or</em> regular expression for element property name matching</li><li><code>value</code> — optional, simple string <em>or</em> string with wildcard <em>or</em> regular expression for element property value matching</li></ul><blockquote><p><strong>Escaping special characters</strong></p><p>For <strong>regexp</strong> patterns <code>&quot;</code> and <code>\</code> should be escaped, e.g. <code>div:matches-property(prop=/[\\w]{4}/)</code>.</p></blockquote><blockquote><p><strong>Note</strong></p><p>Regexp patterns are supported in <code>name</code> for any property in chain, e.g. <code>prop./^unit[\\d]{4}$/.type</code>.</p></blockquote><blockquote><p><strong>Restrictions</strong></p><p>Regexp patterns <strong>do not support</strong> flags.</p></blockquote><p><strong>Examples</strong></p><p>An element with such properties:</p><div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">divProperties </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">check</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">track</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">unit_2random1</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">memoizedProps</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">key</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">tag</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">12</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">_owner</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">effectTag</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">src</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ad.com&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>can be selected by any of these extended selectors:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">div:matches-property(check.track)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">div:matches-property(&quot;check./^unit_.{4,8}$/&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">div:matches-property(&quot;check.unit_*&quot;=true)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">div:matches-property(memoizedProps.key=&quot;null&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">div:matches-property(memoizedProps._owner.src=/ad/)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><strong>For filters maintainers:</strong></p><p>To check properties of a specific element, do the following: 1. Inspect the page element or select it in <code>Elements</code> tab of browser DevTools. 2. Run <code>console.dir($0)</code> in <code>Console</code> tab.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extended-css-xpath">Pseudo-class <code>:xpath()</code><a class="hash-link" href="#extended-css-xpath" title="Direktlink zur Überschrift">​</a></h4><p>The <code>:xpath()</code> pseudo-class allows to select an element by evaluating an XPath expression.</p><p><strong>Syntax</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[target]:xpath(expression)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>target</code>- optional, standard or extended CSS selector</li><li><code>expression</code> — required, valid XPath expression</li></ul><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extended-css-xpath-limitations"><code>:xpath()</code> limitations<a class="hash-link" href="#extended-css-xpath-limitations" title="Direktlink zur Überschrift">​</a></h5><blockquote><p><code>target</code> can be omitted so it is optional. For any other pseudo-class that would mean &quot;apply to <em>all</em> DOM nodes&quot;, but in case of <code>:xpath()</code> it just means &quot;apply to the <em>whole</em> document&quot;, and such applying slows elements selecting significantly. That&#x27;s why rules like <code>#?#:xpath(expression)</code> are limited to looking inside the <code>body</code> tag. For example, rule <code>#?#:xpath(//div[@data-st-area=\&#x27;Advert\&#x27;])</code> is parsed as <code>#?#body:xpath(//div[@data-st-area=\&#x27;Advert\&#x27;])</code>.</p></blockquote><blockquote><p>Extended selectors with defined <code>target</code> as <em>any</em> selector — <code>*:xpath(expression)</code> — can still be used but it is not recommended, so <code>target</code> should be specified instead.</p></blockquote><blockquote><p>Works properly only at the end of selector, except for <a href="#remove-pseudos">pseudo-class :remove()</a>.</p></blockquote><p><strong>Examples</strong></p><p><code>:xpath(//*[@class=&quot;banner&quot;])</code> selects the element <code>div#target1</code>:</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- HTML code --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">target1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">banner</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>:xpath(//*[@class=&quot;inner&quot;]/..)</code> selects the element <code>div#target2</code>:</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- HTML code --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">target2</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">inner</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extended-css-nth-ancestor">Pseudo-class <code>:nth-ancestor()</code><a class="hash-link" href="#extended-css-nth-ancestor" title="Direktlink zur Überschrift">​</a></h4><p>The <code>:nth-ancestor()</code> pseudo-class allows to lookup the <em>nth</em> ancestor relative to the previously selected element.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">subject:nth-ancestor(n)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>subject</code> — required, standard or extended CSS selector</li><li><code>n</code> — required, number &gt;= 1 and &lt; 256, distance to the needed ancestor from the element selected by <code>subject</code></li></ul><p><strong>Syntax</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">subject:nth-ancestor(n)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>subject</code> — required, standard or extended CSS selector</li><li><code>n</code> — required, number &gt;= 1 and &lt; 256, distance to the needed ancestor from the element selected by <code>subject</code></li></ul><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extended-css-nth-ancestor-limitations"><code>:nth-ancestor()</code> limitations<a class="hash-link" href="#extended-css-nth-ancestor-limitations" title="Direktlink zur Überschrift">​</a></h5><blockquote><p>The <code>:nth-ancestor()</code> pseudo-class is not supported inside the argument of the <a href="#extended-css-not"><code>:not()</code> pseudo-class</a>.</p></blockquote><p><strong>Examples</strong></p><p>For such DOM:</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- HTML code --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">target1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">child</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">target2</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">inner</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>.child:nth-ancestor(1)</code> selects the element <code>div#target1</code>, <code>div[class=&quot;inner&quot;]:nth-ancestor(3)</code> selects the element <code>div#target2</code>.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extended-css-upward">Pseudo-class <code>:upward()</code><a class="hash-link" href="#extended-css-upward" title="Direktlink zur Überschrift">​</a></h4><p>The <code>:upward()</code> pseudo-class allows to lookup the ancestor relative to the previously selected element.</p><p><strong>Syntax</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">subject:upward(ancestor)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>subject</code> — required, standard or extended CSS selector</li><li><code>ancestor</code> — required, specification for the ancestor of the element selected by <code>subject</code>, can be set as:<ul><li><em>number</em> &gt;= 1 and &lt; 256 for distance to the needed ancestor, same as <a href="#extended-css-nth-ancestor"><code>:nth-ancestor()</code></a></li><li><em>standard CSS selector</em> for matching closest ancestor</li></ul></li></ul><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extended-css-upward-limitations"><code>:upward()</code> limitations<a class="hash-link" href="#extended-css-upward-limitations" title="Direktlink zur Überschrift">​</a></h5><blockquote><p>The <code>:upward()</code> pseudo-class is not supported inside the argument of the <a href="#extended-css-not"><code>:not()</code> pseudo-class</a>.</p></blockquote><p><strong>Examples</strong></p><p>For such DOM:</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- HTML code --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">target1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">data</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">true</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">child</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">target2</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">inner</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>.inner:upward(div[data])</code> selects the element <code>div#target1</code>, <code>.inner:upward(div[id])</code> selects the element <code>div#target2</code>, <code>.child:upward(1)</code> selects the element <code>div#target1</code>, <code>.inner:upward(3)</code> selects the element <code>div#target2</code>.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="remove-pseudos">Pseudo-class <code>:remove()</code> and pseudo-property <code>remove</code><a class="hash-link" href="#remove-pseudos" title="Direktlink zur Überschrift">​</a></h4><p>Sometimes, it is necessary to remove a matching element instead of hiding it or applying custom styles. In order to do it, you can use the <code>:remove()</code> pseudo-class as well as the <code>remove</code> pseudo-property.</p><blockquote><p><strong>Pseudo-class <code>:remove()</code> can be placed only at the end of a selector.</strong></p></blockquote><p><strong>Syntax</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">! pseudo-class</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">selector:remove()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">! pseudo-property</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">selector { remove: true; }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>selector</code> — required, standard or extended CSS selector</li></ul><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extended-css-remove-limitations"><code>:remove()</code> and <code>remove</code> limitations<a class="hash-link" href="#extended-css-remove-limitations" title="Direktlink zur Überschrift">​</a></h5><blockquote><p>The <code>:remove()</code> pseudo-class is limited to work properly only at the end of selector.</p></blockquote><blockquote><p>For applying the <code>:remove()</code> pseudo-class to any element, a <a href="https://www.w3.org/TR/selectors-4/#the-universal-selector" target="_blank" rel="noopener noreferrer">universal selector</a> <code>*</code> should be used. Otherwise such extended selector may be considered as invalid, e.g. <code>.banner &gt; :remove()</code> is not valid for removing any child element of <code>banner</code> class element, so it should look like <code>.banner &gt; *:remove()</code>.</p></blockquote><blockquote><p>If the <code>:remove()</code> pseudo-class or the <code>remove</code> pseudo-property is used, all style properties are ignored except for the <a href="#selectors-debug-mode"><code>debug</code> pseudo-property</a>.</p></blockquote><p><strong>Examples</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">div.banner:remove()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">div:has(&gt; div[ad-attr]):remove()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">div:contains(advertisement) { remove: true; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">div[class]:has(&gt; a &gt; img) { remove: true; }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><strong>Note</strong></p><p>Rules with the <code>remove</code> pseudo-property should use <code>#$?#</code> marker: <code>$</code> for CSS style rules syntax, <code>?</code> for ExtendedCss syntax.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extended-css-is">Pseudo-class <code>:is()</code><a class="hash-link" href="#extended-css-is" title="Direktlink zur Überschrift">​</a></h4><p>The <code>:is()</code> pseudo-class allows to match any element that can be selected by any of selectors passed to it. Invalid selectors are skipped and the pseudo-class deals with valid ones with no error thrown. Our implementation of the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:is" target="_blank" rel="noopener noreferrer">native <code>:is()</code> pseudo-class</a>.</p><p><strong>Syntax</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[target]:is(selectors)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>target</code> — optional, standard or extended CSS selector, can be missed for checking <em>any</em> element</li><li><code>selectors</code> — <a href="https://drafts.csswg.org/selectors-4/#typedef-forgiving-selector-list" target="_blank" rel="noopener noreferrer"><em>forgiving selector list</em></a> of standard or extended selectors. For extended selectors only compound selectors are supported, not complex.</li></ul><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extended-css-is-limitations"><code>:is()</code> limitations<a class="hash-link" href="#extended-css-is-limitations" title="Direktlink zur Überschrift">​</a></h5><blockquote><p>Rules with the <code>:is()</code> pseudo-class should use the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:is" target="_blank" rel="noopener noreferrer">native implementation of <code>:is()</code></a> if rules use <code>##</code> marker and it is possible, i.e. with no other extended selectors inside. To force applying ExtendedCss rules with <code>:is()</code>, use <code>#?#</code>/<code>#$?#</code> marker explicitly.</p></blockquote><blockquote><p>If the <code>:is()</code> pseudo-class argument <code>selectors</code> is an extended selector, due to the way how the <code>:is()</code> pseudo-class is implemented in ExtendedCss v2.0, it is impossible to apply it to the top DOM node which is <code>html</code>, i.e. <code>#?#html:is(&lt;extended-selectors&gt;)</code> does not work. So if <code>target</code> is not defined or defined as a <a href="https://www.w3.org/TR/selectors-4/#the-universal-selector" target="_blank" rel="noopener noreferrer">universal selector</a> <code>*</code>, the extended pseudo-class applying is limited to <strong><code>html</code>&#x27;s children</strong>, e.g. rules <code>#?#:is(...)</code> and <code>#?#*:is(...)</code> are parsed as <code>#?#html *:is(...)</code>. Please note that there is no such limitation for a standard selector argument, i.e. <code>#?#html:is(.locked)</code> works fine.</p></blockquote><blockquote><p><a href="https://www.w3.org/TR/selectors-4/#complex" target="_blank" rel="noopener noreferrer">Complex selectors</a> with extended pseudo-classes are not supported as <code>selectors</code> argument for <code>:is()</code> pseudo-class, only <a href="https://www.w3.org/TR/selectors-4/#compound" target="_blank" rel="noopener noreferrer">compound ones</a> are allowed. Check examples below for more details.</p></blockquote><p><strong>Examples</strong></p><p><code>#container *:is(.inner, .footer)</code> selects only the element <code>div#target1</code>:</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- HTML code --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">container</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">data</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">true</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">target1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">inner</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Due to limitations <code>:is(*:not([class]) &gt; .banner)&#x27;</code> does not work but <code>:is(*:not([class]):has(&gt; .banner))</code> can be used instead of it to select the element <code>div#target2</code>:</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- HTML code --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">span</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">span</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">text</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">target2</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">p</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">banner</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">inner paragraph</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">p</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extended-css-not">Pseudo-class <code>:not()</code><a class="hash-link" href="#extended-css-not" title="Direktlink zur Überschrift">​</a></h4><p>The <code>:not()</code> pseudo-class allows to select elements which are <em>not matched</em> by selectors passed as argument. Invalid argument selectors are not allowed and error is to be thrown. Our implementation of the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:not" target="_blank" rel="noopener noreferrer"><code>:not()</code> pseudo-class</a>.</p><p><strong>Syntax</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[target]:not(selectors)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>target</code> — optional, standard or extended CSS selector, can be missed for checking <em>any</em> element</li><li><code>selectors</code> — list of standard or extended selectors</li></ul><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extended-css-not-limitations"><code>:not()</code> limitations<a class="hash-link" href="#extended-css-not-limitations" title="Direktlink zur Überschrift">​</a></h5><blockquote><p>Rules with the <code>:not()</code> pseudo-class should use the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/:not" target="_blank" rel="noopener noreferrer">native implementation of <code>:not()</code></a> if rules use <code>##</code> marker and it is possible, i.e. with no other extended selectors inside. To force applying ExtendedCss rules with <code>:not()</code>, use <code>#?#</code>/<code>#$?#</code> marker explicitly.</p></blockquote><blockquote><p>If the <code>:not()</code> pseudo-class argument <code>selectors</code> is an extended selector, due to the way how the <code>:not()</code> pseudo-class is implemented in ExtendedCss v2.0, it is impossible to apply it to the top DOM node which is <code>html</code>, i.e. <code>#?#html:not(&lt;extended-selectors&gt;)</code> does not work. So if <code>target</code> is not defined or defined as a <a href="https://www.w3.org/TR/selectors-4/#the-universal-selector" target="_blank" rel="noopener noreferrer">universal selector</a> <code>*</code>, the extended pseudo-class applying is limited to <strong><code>html</code>&#x27;s children</strong>, e.g. rules <code>#?#:not(...)</code> and <code>#?#*:not(...)</code> are parsed as <code>#?#html *:not(...)</code>. Please note that there is no such limitation for a standard selector argument, i.e. <code>#?#html:not(.locked)</code> works fine.</p></blockquote><blockquote><p>The <code>:not()</code> is considered as a standard CSS pseudo-class inside the argument of the <a href="#extended-css-upward"><code>:upward()</code> pseudo-class</a> because <code>:upward()</code> supports only standard selectors.</p></blockquote><blockquote><p>&quot;Up-looking&quot; pseudo-classes which are <a href="#extended-css-nth-ancestor"><code>:nth-ancestor()</code></a> and <a href="#extended-css-upward"><code>:upward()</code></a> are not supported inside <code>selectors</code> argument for <code>:not()</code> pseudo-class.</p></blockquote><p><strong>Examples</strong></p><p><code>#container &gt; *:not(h2, .text)</code> selects only the element <code>div#target1</code>:</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- HTML code --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">container</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">h2</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Header</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">h2</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">target1</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">span</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">text</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">text</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">span</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="extended-css-if-not">Pseudo-class <code>:if-not()</code> (deprecated)<a class="hash-link" href="#extended-css-if-not" title="Direktlink zur Überschrift">​</a></h4><blockquote><p><strong>Deprecation notice</strong></p><p>The <code>:if-not()</code> pseudo-class is deprecated and is no longer supported. Rules with it are considered as invalid.</p></blockquote><p>This pseudo-class was basically a shortcut for <code>:not(:has())</code>. It was supported by ExtendedCss for better compatibility with some filters subscriptions.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="cosmetic-rules-priority">Cosmetic rules priority<a class="hash-link" href="#cosmetic-rules-priority" title="Direktlink zur Überschrift">​</a></h3><p>The way <strong>element hiding</strong> and <strong>CSS rules</strong> are applied is platform-specific.</p><p><strong>In AdGuard for Windows, Mac, and Android</strong>, we use a stylesheet injected into the page. The priority of cosmetic rules is the same as any other websites&#x27; CSS stylesheet. But there is a limitation: <a href="#elemhide-syntax">element hiding</a> and <a href="#cosmetic-css-rules">CSS rules</a> cannot override inline styles. In such cases, it is recommended to use extended selectors or HTML filtering.</p><p><strong>In AdGuard Browser extension</strong>, the so called &quot;user stylesheets&quot; are used. They have higher priority than even the inline styles.</p><p><strong>Extended CSS selectors</strong> use JavaScript to work and basically add an inline style themselves, therefore they can override any style.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="html-filtering-rules">HTML filtering rules<a class="hash-link" href="#html-filtering-rules" title="Direktlink zur Überschrift">​</a></h2><p>In most cases, the basis and cosmetic rules are enough to filter ads. But sometimes it is necessary to change the HTML-code of the page itself before it is loaded. This is when you need filtering rules for HTML content. They allow to indicate the HTML elements to be cut out before the browser loads the page.</p><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>HTML filtering rules are supported by AdGuard for Windows, Mac, Android, and AdGuard Browser extension for Firefox. Such rules do not work in extensions for other browsers because they are unable to modify content on network level.</p></blockquote><p><strong>Syntax</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">      rule = [domains] &quot;$$&quot; tagName [attributes]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   domains = [domain0, domain1[, ...[, domainN]]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">attributes = &quot;[&quot; name0 = value0 &quot;]&quot; &quot;[&quot; name1 = value2 &quot;]&quot; ... &quot;[&quot; nameN = valueN &quot;]&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong><code>tagName</code></strong> — name of the element in lower case, for example, <code>div</code> or <code>script</code>.</li><li><strong><code>domains</code></strong> — domain restriction for the rule. Same principles as in <a href="#elemhide-syntax">element hiding rules syntax</a>.</li><li><strong><code>attributes</code></strong> — a list of attributes, that limit the elements selection. <code>name</code> — attribute name, <code>value</code> — substring, that is contained in attribute value.</li></ul><p><strong>Examples</strong></p><p><strong>HTML code:</strong></p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">data-src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">/banner.js</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token script"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Rule:</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">example.org$$script[data-src=&quot;banner&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This rule removes all <code>script</code> elements with the attribute <code>data-src</code> containing the substring <code>banner</code>. The rule applies only to <code>example.org</code> and all its subdomains.</p><p><strong>Special attributes</strong></p><p>In addition to usual attributes, which value is every element checked for, there is a set of special attributes that change the way a rule works. Below there is a list of these attributes:</p><ul><li><strong><code>tag-content</code></strong></li></ul><p>This is the most frequently used special attribute. It limits selection with those elements whose innerHTML code contains the specified substring.</p><blockquote><p>You should use <code>&quot;&quot;</code> to escape <code>&quot;</code>, for instance: <code>$$script[tag-content=&quot;alert(&quot;&quot;this is ad&quot;&quot;)&quot;]</code></p></blockquote><p>For example, take a look at this HTML code:</p><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">text/javascript</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">    </span><span class="token script language-javascript dom variable" style="color:#36acaa">document</span><span class="token script language-javascript punctuation" style="color:#393A34">.</span><span class="token script language-javascript method function property-access" style="color:#d73a49">write</span><span class="token script language-javascript punctuation" style="color:#393A34">(</span><span class="token script language-javascript string" style="color:#e3116c">&#x27;&lt;div&gt;banner text&lt;/div&gt;&quot; /&gt;&#x27;</span><span class="token script language-javascript punctuation" style="color:#393A34">)</span><span class="token script language-javascript punctuation" style="color:#393A34">;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Following rule will delete all <code>script</code> elements with a <code>banner</code> substring in their code:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$$script[tag-content=&quot;banner&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><strong>Nested elements</strong></p><p>If we are dealing with multiple nested elements and they all fall within the same HTML filtering rule, they all are going to be deleted.</p></blockquote><ul><li><strong><code>wildcard</code></strong></li></ul><p>This special attribute works almost like <code>tag-content</code> and allows you to check the innerHTML code of the document. Rule will check if HTML code of the element fits to the <a href="https://en.wikipedia.org/wiki/Glob_(programming)" target="_blank" rel="noopener noreferrer">search pattern</a>.</p><blockquote><p>You should use <code>&quot;&quot;</code> to escape <code>&quot;</code>, for instance: <code>$$script[wildcard=&quot;&quot;banner&quot;&quot;]</code></p></blockquote><p>For example: <code>$$script[wildcard=&quot;*banner*text*&quot;]</code></p><p>It will check, if the code of element contains two consecutive substrings <code>banner</code> and <code>text</code>.</p><ul><li><strong><code>max-length</code></strong></li></ul><p>Specifies the maximum length for content of HTML element. If this parameter is set and the content length exceeds the value, a rule does not apply to the element.</p><blockquote><p><strong>Default value</strong></p><p>If this parameter is not specified, the <code>max-length</code> is considered to be 8192.</p></blockquote><p>For example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$$div[tag-content=&quot;banner&quot;][max-length=&quot;400&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This rule will remove all the <code>div</code> elements, whose code contains the substring <code>banner</code> and the length of which does not exceed <code>400</code> characters.</p><ul><li><strong><code>min-length</code></strong></li></ul><p>Specifies the minimum length for content of HTML element. If this parameter is set and the content length is less than preset value, a rule does not apply to the element.</p><p>For example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$$div[tag-content=&quot;banner&quot;][min-length=&quot;400&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This rule will remove all the <code>div</code> elements, whose code contains the substring <code>banner</code> and the length of which exceeds <code>400</code> characters.</p><p><strong>Exceptions</strong></p><p>Similar to hiding rules, there is a special type of rules that disable the selected HTML filtering rule for particular domains. The syntax is the same, you just have to change <code>$$</code> to <code>$@$</code>.</p><p>For example, there is a rule in filter:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$$script[tag-content=&quot;banner&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you want to disable it for <code>example.com</code>, you can create an exception rule:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">example.com$@$script[tag-content=&quot;banner&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Sometimes, it may be necessary to disable all restriction rules. For example, to conduct tests. To do this, use the exclusion rule without specifying a domain.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$@$script[tag-content=&quot;banner&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We recommend to use this kind of exceptions only if it is not possible to change the hiding rule itself. In other cases it is better to change the original rule, using domain restrictions.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="javascript-rules">JavaScript rules<a class="hash-link" href="#javascript-rules" title="Direktlink zur Überschrift">​</a></h2><p>AdGuard supports a special type of rules that allows you to inject any javascript code to websites pages.</p><blockquote><p><strong>Restrictions</strong></p><p>JavaScript rules can be used <a href="#trusted-filters"><strong>only in trusted filters</strong></a>.</p></blockquote><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>JavaScript rules are not supported by AdGuard Content Blocker.</p></blockquote><p>We <strong>strongly recommend</strong> using <a href="#scriptlets">scriptlets</a> instead of JavaScript rules whenever possible. JS rules are supposed to help with debugging, but as a long-time solution a scriptlet rule should be used.</p><p><strong>Syntax</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rule = [domains]  &quot;#%#&quot; script</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong><code>domains</code></strong> — domain restriction for the rule. Same principles as in <a href="#elemhide-syntax">element hiding rules</a>.</li><li><strong><code>script</code></strong> — arbitrary javascript code <strong>in one string</strong>.</li></ul><p><strong>Examples</strong></p><ul><li><code>example.org#%#window.__gaq = undefined;</code> executes the code <code>window.__gaq = undefined;</code> on all pages at <code>example.org</code> and all subdomains.</li></ul><p><strong>Exceptions</strong></p><p>Similar to hiding rules, there is a special type of rules that disable the selected javascript rule for particular domains. The syntax is the same, you just have to change <code>#%#</code> to <code>#@%#</code>.</p><p>For example, there is a rule in filter:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#%#window.__gaq = undefined;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you want to disable it for <code>example.com</code>, you can create an exception rule:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">example.com#@%#window.__gaq = undefined;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Sometimes, it may be necessary to disable all restriction rules. For example, to conduct tests. To do this, use the exclusion rule without specifying a domain.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#@%#window.__gaq = undefined;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We recommend to use this kind of exceptions only if it is not possible to change the hiding rule itself. In other cases it is better to change the original rule, using domain restrictions.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="scriptlets">Scriptlet rules<a class="hash-link" href="#scriptlets" title="Direktlink zur Überschrift">​</a></h2><p>Scriptlet is a JavaScript function that provides extended capabilities for content blocking. These functions can be used in a declarative manner in AdGuard filtering rules.</p><blockquote><p><strong>Restrictions</strong></p><p>Trusted scriptlets rules can be used <a href="#trusted-filters"><strong>only in trusted filters</strong></a>.</p></blockquote><blockquote><p><strong>Note</strong></p><p>AdGuard supports a lot of different scriptlets. In order to achieve cross-blocker compatibility, we also support syntax of uBO and ABP.</p></blockquote><p><strong>Syntax</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rule = [domains]  &quot;#%#//scriptlet(&quot; scriptletName arguments &quot;)&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong><code>scriptletName</code></strong> — required, a name of the scriptlet from AdGuard&#x27;s Scriptlets library</li><li><strong><code>arguments</code></strong> — optional, a list of <code>string</code> arguments (no other types of arguments are supported)</li></ul><p><strong>Examples</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">example.org#%#//scriptlet(&quot;abort-on-property-read&quot;, &quot;alert&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This rule will be applied to <code>example.org</code> and subdomains pages and will execute the <code>abort-on-property-read</code> scriptlet with the <code>alert</code> parameter.</p><p>Learn more about <a href="#debug-scriptlets">how to debug scriptlets</a>.</p><p>More information about scriptlets can be found <a href="https://github.com/AdguardTeam/Scriptlets#scriptlets" target="_blank" rel="noopener noreferrer">on GitHub</a>.</p><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>Scriptlet rules are not supported by AdGuard Content Blocker.</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="trusted-scriptlets">Trusted scriptlets<a class="hash-link" href="#trusted-scriptlets" title="Direktlink zur Überschrift">​</a></h3><p>Trusted scriptlets are <a href="#scriptlets">scriptlets</a> with extended functionality. It means the same syntax and restrictions. Trusted scriptlet names are prefixed with <code>trusted-</code>, e.g. <code>trusted-set-cookie</code>, to be easily distinguished from common scriptlets.</p><blockquote><p><strong>Note</strong></p><p>Trusted scriptlets are not compatible with other ad blockers except AdGuard</p></blockquote><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>Trusted scriptlets rules are now supported by AdGuard for Windows, Mac, and Android, <strong>running CoreLibs version 1.10.141 or later</strong>.</p></blockquote><p>Learn more about <a href="#debug-scriptlets">how to debug scriptlets</a>.</p><p>More information about trusted scriptlets can be found <a href="https://github.com/AdguardTeam/Scriptlets#trusted-scriptlets" target="_blank" rel="noopener noreferrer">on GitHub</a>.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="modifiers-for-non-basic-type-of-rules">Modifiers for non-basic type of rules<a class="hash-link" href="#modifiers-for-non-basic-type-of-rules" title="Direktlink zur Überschrift">​</a></h2><ul><li><a href="#non-basic-app-modifier"><code>$app</code></a></li><li><a href="#non-basic-domain-modifier"><code>$domain</code></a></li><li><a href="#non-basic-path-modifier"><code>$path</code></a></li><li><a href="#non-basic-url-modifier"><code>$url</code></a></li></ul><p>Each rule can be modified using the modifiers described in the following paragraphs.</p><p><strong>Syntax</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rule = &quot;[$&quot; modifiers &quot;]&quot; [rule text]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">modifiers = modifier0[, modifier1[, ...[, modifierN]]]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong><code>modifier</code></strong> — set of the modifiers described below.</li><li><strong><code>rule text</code></strong> — a rule to be modified.</li></ul><p>For example, <code>[$domain=example.com,app=test_app]##selector</code>.</p><p>In the modifiers values of the following characters must be escaped: <code>[</code>, <code>]</code>, <code>,</code>, and <code>\</code> (unless it is used for the escaping). Use <code>\</code> to escape them. For example, an escaped bracket looks like this: <code>\]</code>.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="non-basic-app-modifier"><strong><code>$app</code></strong><a class="hash-link" href="#non-basic-app-modifier" title="Direktlink zur Überschrift">​</a></h4><p><code>$app</code> modifier lets you narrow the rule coverage down to a specific application or a list of applications. The modifier&#x27;s behavior and syntax perfectly match the corresponding <a href="#app-modifier">basic rules <code>$app</code> modifier</a>.</p><p><strong>Examples</strong></p><ul><li><code>[$app=org.example.app]example.com##.textad</code> hides a <code>div</code> with a class <code>textad</code> at <code>example.com</code> and all subdomains in requests sent from the <code>org.example.app</code> Android app.</li><li><code>[$app=~org.example.app1|~org.example.app2]example.com##.textad</code> hides a <code>div</code> with a class <code>textad</code> at <code>example.com</code> and all subdomains in requests sent from any app except <code>org.example.app1</code> and <code>org.example.app2</code>.</li><li><code>[$app=com.apple.Safari]example.org#%#//scriptlet(&#x27;prevent-setInterval&#x27;, &#x27;check&#x27;, &#x27;!300&#x27;)</code> applies scriptlet <code>prevent-setInterval</code> only in Safari browser on Mac.</li><li><code>[$app=org.example.app]#@#.textad</code> disables all <code>##.textad</code> rules for all domains while using <code>org.example.app</code>.</li></ul><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>Such rules with <code>$app</code> modifier are supported by AdGuard for Windows, Mac and Android.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="non-basic-domain-modifier"><strong><code>$domain</code></strong><a class="hash-link" href="#non-basic-domain-modifier" title="Direktlink zur Überschrift">​</a></h4><p><code>$domain</code> modifier limits the rule application area to a list of domains and their subdomains. The modifier&#x27;s behavior and syntax perfectly match the corresponding <a href="#domain-modifier">basic rules <code>$domain</code> modifier</a>.</p><p><strong>Examples</strong></p><ul><li><code>[$domain=example.com]##.textad</code> — hides a <code>div</code> with a class <code>textad</code> at <code>example.com</code> and all subdomains.</li><li><code>[$domain=example.com|example.org]###adblock</code> — hides an element with attribute <code>id</code> equals <code>adblock</code> at <code>example.com</code>, <code>example.org</code> and all subdomains.</li><li><code>[$domain=~example.com]##.textad</code> — this rule hides <code>div</code> elements of the class <code>textad</code> for all domains, except <code>example.com</code> and its subdomains.</li></ul><p>Please note that there are 2 ways to specify domain restrictions for non-basic rules:</p><ol><li>the &quot;classic&quot; way is to specify domains before rule mask and attributes: <code>example.com##.textad</code>;</li><li>the modifier approach is to specify domains via <code>$domain</code> modifier: <code>[$domain=example.com]##.textad</code>.</li></ol><p>But rules with mixed style domains restriction are considered invalid. So, for example, the rule <code>[$domain=example.org]example.com##.textad</code> will be rejected.</p><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>Such rules with <code>$domain</code> modifier are supported by AdGuard for Windows, Mac, Android, and AdGuard Browser extension for Chrome, Firefox, Edge.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="non-basic-path-modifier"><strong><code>$path</code></strong><a class="hash-link" href="#non-basic-path-modifier" title="Direktlink zur Überschrift">​</a></h4><p><code>$path</code> modifier limits the rule application area to specific locations or pages on websites.</p><p><strong>Syntax</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$path [&quot;=&quot; pattern]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>pattern</code> — optional, a path mask to which the rule is restricted. Its syntax and behavior are pretty much the same as with the <a href="#basic-rules-syntax">pattern for basic rules</a>. You can also use <a href="#basic-rules-special-characters">special characters</a>, except for <code>||</code>, which does not make any sense in this case (see examples below).</p><blockquote><p>If <code>pattern</code> is not set for <code>$path</code>, rule will apply only on the main page of website.</p></blockquote><blockquote><p><code>$path</code> modifier matches the query string as well.</p></blockquote><blockquote><p><code>$path</code> modifier supports regular expressions in <a href="#regexp-support">the same way</a> basic rules do.</p></blockquote><p><strong>Examples</strong></p><ul><li><code>[$path=page.html]##.textad</code> hides a <code>div</code> with a class <code>textad</code> at <code>/page.html</code> or <code>/page.html?&lt;query&gt;</code> or <code>/sub/page.html</code> or <code>/another_page.html</code></li><li><code>[$path=/page.html]##.textad</code> hides a <code>div</code> with a class <code>textad</code> at <code>/page.html</code> or <code>/page.html?&lt;query&gt;</code> or <code>/sub/page.html</code> of any domain but not at <code>/another_page.html</code></li><li><code>[$path=|/page.html]##.textad</code> hides a <code>div</code> with a class <code>textad</code> at <code>/page.html</code> or <code>/page.html?&lt;query&gt;</code> of any domain but not at <code>/sub/page.html</code></li><li><code>[$path=/page.html|]##.textad</code> hides a <code>div</code> with a class <code>textad</code> at <code>/page.html</code> or <code>/sub/page.html</code> of any domain but not at <code>/page.html?&lt;query&gt;</code></li><li><code>[$path=/page*.html]example.com##.textad</code> hides a <code>div</code> with a class <code>textad</code> at <code>/page1.html</code> or <code>/page2.html</code> or any other path matching <code>/page&lt;...&gt;.html</code> of <code>example.com</code></li><li><code>[$path]example.com##.textad</code> hides a <code>div</code> with a class <code>textad</code> at the main page of <code>example.com</code></li><li><code>[$domain=example.com,path=/page.html]##.textad</code> hides a <code>div</code> with a class <code>textad</code> at <code>page.html</code> of <code>example.com</code> and all subdomains but not at <code>another_page.html</code></li><li><code>[$path=/\\/(sub1|sub2)\\/page\\.html/]##.textad</code> hides a <code>div</code> with a class <code>textad</code> at both <code>/sub1/page.html</code> and <code>/sub2/page.html</code> of any domain (please note the <a href="#non-basic-rules-modifiers-syntax">escaped special characters</a>)</li></ul><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>Rules with <code>$path</code> modifier are supported by AdGuard for Windows, Mac, Android, and AdGuard Browser extension for Chrome, Firefox, Edge.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="non-basic-url-modifier"><strong><code>url</code></strong><a class="hash-link" href="#non-basic-url-modifier" title="Direktlink zur Überschrift">​</a></h4><p><code>$url</code> modifier limits the rule application area to URLs matching the specified mask.</p><p><strong>Syntax</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">url = pattern</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>where <code>pattern</code> is pretty much the same as <a href="#basic-rules-syntax"><code>pattern</code> of the basic rules</a> assuming that <a href="#non-basic-rules-modifiers-syntax">some characters</a> must be escaped. The <a href="#basic-rules-special-characters">special characters</a> and <a href="#regexp-support">regular expressions</a> are supported as well.</p><p><strong>Examples</strong></p><ul><li><code>[$url=||example.com/ads/*]##.textad</code> hides a <code>div</code> with a class <code>textad</code> at addresses like <code>http://example.com/ads/banner.jpg</code> and even <code>http://subdomain.example.com/ads/otherbanner.jpg</code>.</li><li><code>[$url=||example.org^]###adblock</code> hides an element with attribute <code>id</code> equal to <code>adblock</code> at <code>example.org</code> and its subdomains.</li><li><code>[$url=/\[a-z\]+\\.example\\.com^/]##.textad</code> hides <code>div</code> elements of the class <code>textad</code> for all domains matching the regular expression <code>[a-z]+\.example\.com^</code>.</li></ul><blockquote><p><strong>Compatibility with different versions of AdGuard</strong></p><p>Rules with the <code>$url</code> modifier are supported by AdGuard for Windows, Mac, and Android, <strong>running CoreLibs version 1.11 or later</strong>.</p></blockquote><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="information-for-filters-maintainers">Information for filters maintainers<a class="hash-link" href="#information-for-filters-maintainers" title="Direktlink zur Überschrift">​</a></h2><p>If you maintain a third-party filter that is known to AdGuard, you might be interested in the information presented in this section. Please note that hints will be applied to registered filters only. The filter is considered to be registered and known by AdGuard, if it is present in the <a href="https://filters.adtidy.org/extension/chromium/filters.json" target="_blank" rel="noopener noreferrer">known filters index</a>. If you want your filter to be registered, please file an issue to <a href="https://github.com/AdguardTeam/AdguardFilters" target="_blank" rel="noopener noreferrer">AdguardFilters repo</a>.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="preprocessor-directives">Preprocessor directives<a class="hash-link" href="#preprocessor-directives" title="Direktlink zur Überschrift">​</a></h3><p>We provide preprocessor directives that can be used by filters maintainers to improve compatibility with different ad blockers and provide:</p><ul><li><a href="#include-directive">including a file</a></li><li><a href="#conditions-directive">applying rules conditionally by ad blocker type</a></li><li><a href="#safari-affinity-directive">content blocker specifying for rules applying in Safari</a></li></ul><blockquote><p><strong>Note</strong></p><p>Any mistake in a preprocessor directive will lead to AdGuard failing the filter update in the same way as if the filter URL was unavailable.</p></blockquote><blockquote><p>Preprocessor directives can be used in the User Rules or in the custom filters.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="include-directive">Including a file<a class="hash-link" href="#include-directive" title="Direktlink zur Überschrift">​</a></h4><p>The <code>!#include</code> directive allows to include contents of a specified file into the filter. It supports only files from the same origin to make sure that the filter maintainer is in control of the specified file. The included file can also contain pre- directives (even other <code>!#include</code> directives). Ad blockers should consider the case of recursive <code>!#include</code> and implement a protection mechanism.</p><p><strong>Syntax</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">!#include file_path</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>where <code>file_path</code> is a same origin absolute or relative file path to be included.</p><blockquote><p>The files must originate from the same domain but may be located in a different folder.</p></blockquote><blockquote><p>If included file is not found or unavailable, the whole filter update should fail.</p></blockquote><blockquote><p>Same-origin limitation should be disabled for local custom filters.</p></blockquote><p><strong>Examples</strong></p><p>Filter URL: <code>https://example.org/path/filter.txt</code></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">! Valid (same origin):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!#include https://example.org/path/includedfile.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">! Valid (relative path):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!#include /includedfile.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!#include ../path2/includedfile.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">! Invalid (another origin):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!#include https://domain.com/path/includedfile.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="conditions-directive">Conditions<a class="hash-link" href="#conditions-directive" title="Direktlink zur Überschrift">​</a></h4><p>Filters maintainers can use conditions to supply different rules depending on the ad blocker type. When an adblocker encounters an <code>!#if</code> directive, followed eventually by an <code>!#endif</code> directive, it will compile the code inside of the directives block only if the specified condition is true. Condition supports all the basic logical operators.</p><blockquote><p>A conditional directive beginning with an <code>!#if</code> directive must explicitly be terminated with an <code>!#endif</code> directive.</p></blockquote><blockquote><p>Whitespaces matter. <code>!#if</code> is a valid directive, while <code>!# if</code> is not.</p></blockquote><p><strong>Syntax</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">!#if (conditions)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rules_list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!#endif</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>where:</p><ul><li><code>!#if (conditions)</code> — start of the block</li><li><code>conditions</code> — just like in some popular programming languages, preprocessor conditions are based on constants declared by ad blockers. Ad blocker authors define on their own what exact constants do they declare. Possible values:<ul><li><code>adguard</code> always declared; shows maintainers that this is one of AdGuard products; should be enough in 95% of cases</li><li>product-specific constants for cases when you need a rule to work (or not work — then <code>!</code> should be used before constant) in a specific product only:<ul><li><code>adguard_app_windows</code> — AdGuard for Windows</li><li><code>adguard_app_mac</code> — AdGuard for Mac</li><li><code>adguard_app_android</code> — AdGuard for Android</li><li><code>adguard_app_ios</code> — AdGuard for iOS</li><li><code>adguard_ext_safari</code> — AdGuard for Safari</li><li><code>adguard_ext_chromium</code> — AdGuard Browser extension for Chrome (and chromium-based browsers, e.g. new Microsoft Edge)</li><li><code>adguard_ext_firefox</code> — AdGuard Browser extension for Firefox</li><li><code>adguard_ext_edge</code> — AdGuard Browser extension for Edge Legacy</li><li><code>adguard_ext_opera</code> — AdGuard Browser extension for Opera</li><li><code>adguard_ext_android_cb</code> — AdGuard Content Blocker for mobile Samsung and Yandex browsers</li><li><code>ext_ublock</code> — special case; this one is declared when a uBlock version of a filter is compiled by the <a href="https://github.com/AdguardTeam/FiltersRegistry" target="_blank" rel="noopener noreferrer">FiltersRegistry</a></li></ul></li></ul></li><li><code>rules_list</code> — list of rules</li><li><code>!#endif</code> — end of the block</li></ul><p><strong>Examples</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">! for all AdGuard products except AdGuard for Safari</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!#if (adguard &amp;&amp; !adguard_ext_safari)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">||example.org^$third-party</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">domain.com##div.ad</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!#endif</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">! directives even can be combined</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!#if (adguard_app_android)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!#include /androidspecific.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!#endif</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="safari-affinity-directive">Safari affinity<a class="hash-link" href="#safari-affinity-directive" title="Direktlink zur Überschrift">​</a></h4><p>Safari is notoriously known for its harsh 150k max limit for filtering rules in content blockers. But in AdGuard for Safari and AdGuard for iOS max rule count is raised to 300k by splitting them into several content blockers. Generally, several filters categories are more or less independent, so there is such content blockers with such categories included:</p><ul><li>AdGuard General — Ad Blocking, Language-specific</li><li>AdGuard Privacy — Privacy</li><li>AdGuard Social — Social Widgets, Annoyances</li><li>AdGuard Security — Security</li><li>AdGuard Other — Other</li><li>AdGuard Custom — Custom</li></ul><blockquote><p><code>User rules</code> and <code>Allowlist</code> are added to every content blocker.</p></blockquote><p>The main issue with using multiple content blockers is that rules inside these content blockers cannot influence each other. This may lead to different unexpected issues. So filters maintainers may use <code>!#safari_cb_affinity</code> to define Safari content blockers affinity for the rules inside of the directive block.</p><p><strong>Syntax</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">!#safari_cb_affinity(content_blockers)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rules_list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!#safari_cb_affinity</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>where:</p><ul><li><code>!#safari_cb_affinity(content_blockers)</code> — start of the block</li><li><code>content_blockers</code> — comma-separated list of content blockers. Possible values:<ul><li><code>general</code> — AdGuard General content blocker</li><li><code>privacy</code> — AdGuard Privacy content blocker</li><li><code>social</code> — AdGuard Social content blocker</li><li><code>security</code> — AdGuard Security content blocker</li><li><code>other</code> — AdGuard Other content blocker</li><li><code>custom</code> — AdGuard Custom content blocker</li><li><code>all</code> — special keyword that means that the rules must be included into <strong>all</strong> content blockers</li></ul></li><li><code>rules_list</code> — list of rules</li><li><code>!#safari_cb_affinity</code> — end of the block</li></ul><p><strong>Examples</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">! to unhide specific element which is hidden by AdGuard Base filter:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!#safari_cb_affinity(general)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">example.org#@#.adBanner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!#safari_cb_affinity</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">! to allowlist basic rule from AdGuard Tracking Protection filter filter:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!#safari_cb_affinity(privacy)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@@||example.org^</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!#safari_cb_affinity</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="hints">Hints<a class="hash-link" href="#hints" title="Direktlink zur Überschrift">​</a></h3><p>&quot;Hint&quot; is a special comment, instruction to the filters compiler used on the server side (see <a href="https://github.com/AdguardTeam/FiltersRegistry" target="_blank" rel="noopener noreferrer">FiltersRegistry</a>).</p><p><strong>Syntax</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">!+ HINT_NAME1(PARAMS) HINT_NAME2(PARAMS)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>Multiple hints can be applied.</p></blockquote><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="not_optimized-hint"><code>NOT_OPTIMIZED</code> hint<a class="hash-link" href="#not_optimized-hint" title="Direktlink zur Überschrift">​</a></h4><p>For each filter, AdGuard compiles two versions: full and optimized. Optimized version is much more lightweight and does not contain rules which are not used at all or used rarely.</p><p>Rules usage frequency comes from the collected <a href="/KnowledgeBase/de/general/ad-filtering/tracking-filter-statistics/">filter rules statistics</a>. But filters optimization is based on more than that — some filters have specific configuration. This is how it looks like for Base filter:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;filter&quot;: AdGuard Base filter,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;percent&quot;: 30,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;minPercent&quot;: 20,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;maxPercent&quot;: 40,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;strict&quot;: true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>where:</p><ul><li><strong>filter</strong> — filter identifier</li><li><strong>percent</strong> — expected optimization percent <code>~= (rules count in optimized filter) / (rules count in original filter) * 100</code></li><li><strong>minPercent</strong> — lower bound of <code>percent</code> value</li><li><strong>maxPercent</strong> — upper bound of <code>percent</code> value</li><li><strong>strict</strong> — if <code>percent &lt; minPercent</code> OR <code>percent &gt; maxPercent</code> and strict mode is on then filter compilation should fail, otherwise original rules must be used</li></ul><blockquote><p>In other words, <code>percent</code> is the &quot;compression level&quot;. For instance, for the Base filter it is configured to 40%. It means that optimization algorithm should strip 60% of rules.</p></blockquote><p>Eventually, here are the two versions of the Base filter for AdGuard Browser extension:</p><ul><li>full: <a href="https://filters.adtidy.org/extension/chromium/filters/2.txt" target="_blank" rel="noopener noreferrer">https://filters.adtidy.org/extension/chromium/filters/2.txt</a></li><li>optimized: <a href="https://filters.adtidy.org/extension/chromium/filters/2_optimized.txt" target="_blank" rel="noopener noreferrer">https://filters.adtidy.org/extension/chromium/filters/2_optimized.txt</a></li></ul><p><strong>If you want to add a rule which should not be removed at optimization use the <code>NOT_OPTIMIZED</code> hint:</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">!+ NOT_OPTIMIZED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">||example.org^</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>And this rule will not be optimized only for AdGuard for Android:</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">!+ NOT_OPTIMIZED PLATFORM(android)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">||example.org^</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="platform-and-not_platform-hints"><code>PLATFORM</code> and <code>NOT_PLATFORM</code> hints<a class="hash-link" href="#platform-and-not_platform-hints" title="Direktlink zur Überschrift">​</a></h4><p>Used to specify the platforms to apply the rules. List of existing platforms and links to Base filter, for example, for each of them:</p><ul><li><p><code>windows</code> — AdGuard for Windows — <a href="https://filters.adtidy.org/windows/filters/2.txt" target="_blank" rel="noopener noreferrer">https://filters.adtidy.org/windows/filters/2.txt</a></p></li><li><p><code>mac</code> — AdGuard for Mac — <a href="https://filters.adtidy.org/mac_v2/filters/2.txt" target="_blank" rel="noopener noreferrer">https://filters.adtidy.org/mac_v2/filters/2.txt</a></p></li><li><p><code>android</code> — AdGuard for Android — <a href="https://filters.adtidy.org/android/filters/2.txt" target="_blank" rel="noopener noreferrer">https://filters.adtidy.org/android/filters/2.txt</a></p></li><li><p><code>ios</code> — AdGuard for iOS — <a href="https://filters.adtidy.org/ios/filters/2.txt" target="_blank" rel="noopener noreferrer">https://filters.adtidy.org/ios/filters/2.txt</a></p></li><li><p><code>ext_chromium</code> — AdGuard Browser extension for Chrome — <a href="https://filters.adtidy.org/extension/chromium/filters/2.txt" target="_blank" rel="noopener noreferrer">https://filters.adtidy.org/extension/chromium/filters/2.txt</a></p></li><li><p><code>ext_ff</code> — AdGuard Browser extension for Firefox — <a href="https://filters.adtidy.org/extension/firefox/filters/2.txt" target="_blank" rel="noopener noreferrer">https://filters.adtidy.org/extension/firefox/filters/2.txt</a></p></li><li><p><code>ext_edge</code> — AdGuard Browser extension for Edge — <a href="https://filters.adtidy.org/extension/edge/filters/2.txt" target="_blank" rel="noopener noreferrer">https://filters.adtidy.org/extension/edge/filters/2.txt</a></p></li><li><p><code>ext_opera</code> — AdGuard Browser extension for Opera — <a href="https://filters.adtidy.org/extension/opera/filters/2.txt" target="_blank" rel="noopener noreferrer">https://filters.adtidy.org/extension/opera/filters/2.txt</a></p></li><li><p><code>ext_safari</code> — AdGuard for Safari — <a href="https://filters.adtidy.org/extension/safari/filters/2.txt" target="_blank" rel="noopener noreferrer">https://filters.adtidy.org/extension/safari/filters/2.txt</a></p></li><li><p><code>ext_android_cb</code> — AdGuard Content Blocker — <a href="https://filters.adtidy.org/extension/android-content-blocker/filters/2.txt" target="_blank" rel="noopener noreferrer">https://filters.adtidy.org/extension/android-content-blocker/filters/2.txt</a></p></li><li><p><code>ext_ublock</code> — uBlock Origin — <a href="https://filters.adtidy.org/extension/ublock/filters/2.txt" target="_blank" rel="noopener noreferrer">https://filters.adtidy.org/extension/ublock/filters/2.txt</a></p></li></ul><p><strong>Examples</strong></p><p>This rule will be available only in AdGuard for Windows, Mac, Android:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">!+ PLATFORM(windows,mac,android)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">||example.org^</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This rule will be available for every platform except AdGuard for Safari, AdGuard Content Blocker, and AdGuard for iOS:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">!+ NOT_PLATFORM(ext_safari, ext_android_cb, ios)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">||example.org^</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-to-debug-filtering-rules">How to debug filtering rules<a class="hash-link" href="#how-to-debug-filtering-rules" title="Direktlink zur Überschrift">​</a></h2><p>It may be possible to create simple filtering rules &quot;in your head&quot; but for anything even slightly more complicated you will need additional tools to debug and iterate them. There are tools to assist you with that. You can use DevTools in Chrome and its analogs in other browsers but most AdGuard products provide another one — Filtering log.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="filtering-log">Filtering log<a class="hash-link" href="#filtering-log" title="Direktlink zur Überschrift">​</a></h3><p>Filtering log is an advanced tool that will be helpful mostly to filter developers. It lists all web requests that pass through AdGuard, gives you exhaustive information on each of them, offers multiple sorting options, and has other useful features.</p><p>Depending on which AdGuard product you are using, Filtering log can be located in different places.</p><ul><li>In <strong>AdGuard for Windows</strong> you will find it inside <em>Ad Blocker</em> tab or via the tray menu;</li><li>In <strong>AdGuard for Mac</strong> it is under <em>Settings &gt; Advanced &gt; Filtering log</em>;</li><li>In <strong>AdGuard for Android</strong> it is a separate item in the side menu, also filtering log for a specific app or website is accessible from the Assistant.</li><li>In <strong>AdGuard Browser extension</strong> it is accessible from the <em>Miscellaneous</em> settings tab or by right-clicking the extension icon. Only Chromium- and Firefox-based browsers show applied <strong>element hiding rules</strong> (including CSS, ExtCSS) and <strong>JS rules and scriptlets</strong> in their Filtering logs.</li></ul><blockquote><p>In <strong>AdGuard for iOS</strong> and in <strong>AdGuard for Safari</strong> Filtering log does not exist because of the way content blockers are implemented in Safari. AdGuard does not see the web requests and therefore cannot display them.</p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="selectors-debug-mode">Selectors debugging mode<a class="hash-link" href="#selectors-debug-mode" title="Direktlink zur Überschrift">​</a></h3><p>Sometimes, you might need to check the performance of a given selector or a stylesheet. In order to do it without interacting with JavaScript directly, you can use a special <code>debug</code> style property. When <code>ExtendedCss</code> meets this property, it enables the debugging mode either for a single selector or for all selectors, depending on the <code>debug</code> value.</p><p>Open the browser console while on a web page to see the timing statistics for selector(s) that were applied there. Debugging mode displays the following stats as object where each of the debugged selectors are keys, and value is an object with such properties:</p><p><strong>Always printed:</strong></p><ul><li><code>selectorParsed</code> — text of eventually parsed selector</li><li><code>timings</code> — list of DOM nodes matched by the selector<ul><li><code>appliesCount</code> — total number of times that the selector has been applied on the page</li><li><code>appliesTimings</code> — time that it took to apply the selector on the page, for each of the instances that it has been applied (in milliseconds)</li><li><code>meanTiming</code> — mean time that it took to apply the selector on the page</li><li><code>standardDeviation</code> — standard deviation</li><li><code>timingsSum</code> — total time it took to apply the selector on the page across all instances</li></ul></li></ul><p><strong>Printed only for remove pseudos:</strong></p><ul><li><code>removed</code> — flag to signal if elements we removed</li></ul><p><strong>Printed if elements are not removed:</strong></p><ul><li><code>matchedElements</code> — list of DOM nodes matched by the selector</li><li><code>styleApplied</code> — parsed rule style declaration related to the selector</li></ul><p><strong>Examples</strong></p><p><strong>Debugging a single selector:</strong></p><p>When the value of the <code>debug</code> property is <code>true</code>, only information about this selector will be shown in the browser console.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#$?#.banner { display: none; debug: true; }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Enabling global debug:</strong></p><p>When the value of the <code>debug</code> property is <code>global</code>, the console will display information about all extended CSS selectors that have matches on the current page, for all the rules from any of the enabled filters.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#$?#.banner { display: none; debug: global; }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Testing extended selectors without AdGuard</strong></p><p>ExtendedCss can be executed on any page without using any AdGuard product. In order to do that you should copy and execute the following code in a browser console:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">!</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">e</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter">t</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter">d</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token constant" style="color:#36acaa">C</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createElement</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token constant" style="color:#36acaa">C</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">src</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">d</span><span class="token punctuation" style="color:#393A34">,</span><span class="token constant" style="color:#36acaa">C</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">onload</span><span class="token operator" style="color:#393A34">=</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token function" style="color:#d73a49">alert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;ExtendedCss loaded successfully&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">s</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementsByTagName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">s</span><span class="token operator" style="color:#393A34">?</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">parentNode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">insertBefore</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">C</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">h</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">e</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementsByTagName</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;head&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">h</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">appendChild</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">C</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">(</span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;script&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&quot;https://AdguardTeam.github.io/ExtendedCss/extended-css.min.js&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Alternatively, install the <a href="https://github.com/AdguardTeam/Userscripts/blob/master/extendedCssDebugger/extended-css.debugger.user.js" target="_blank" rel="noopener noreferrer">ExtendedCssDebugger userscript</a>.</p><p>Now you can now use the <code>ExtendedCss</code> from global scope, and run its method <a href="https://github.com/AdguardTeam/ExtendedCss#extended-css-query" target="_blank" rel="noopener noreferrer"><code>query()</code></a> as <code>Document.querySelectorAll()</code>.</p><p><strong>Examples</strong></p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> selector </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;div.block:has=(.header:matches-css(after, content: Ads))&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// array of HTMLElements matched the `selector` is to be returned</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token maybe-class-name">ExtendedCss</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">query</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">selector</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Code in die Zwischenablage kopieren" title="Kopieren" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="debug-scriptlets">Debugging scriptlets<a class="hash-link" href="#debug-scriptlets" title="Direktlink zur Überschrift">​</a></h3><p>If you are using AdGuard Browser extension and want to debug a <a href="#scriptlets">scriptlet</a> or a <a href="#trusted-scriptlets">trusted scriptlet</a> rule, you can get additional information by opening the Filtering log. In that case, scriptlets will switch to debug mode and there will be more information in the browser console.</p><p>The following scriptlets are especially developed for debug purposes:</p><ul><li><a href="https://github.com/AdguardTeam/Scriptlets/blob/master/wiki/about-scriptlets#debug-current-inline-script" target="_blank" rel="noopener noreferrer"><code>debug-current-inline-script</code></a></li><li><a href="https://github.com/AdguardTeam/Scriptlets/blob/master/wiki/about-scriptlets#debug-on-property-read" target="_blank" rel="noopener noreferrer"><code>debug-on-property-read</code></a></li><li><a href="https://github.com/AdguardTeam/Scriptlets/blob/master/wiki/about-scriptlets#abort-on-property-write" target="_blank" rel="noopener noreferrer"><code>debug-on-property-write</code></a></li><li><a href="https://github.com/AdguardTeam/Scriptlets/blob/master/wiki/about-scriptlets#log-addEventListener" target="_blank" rel="noopener noreferrer"><code>log-addEventListener</code></a></li><li><a href="https://github.com/AdguardTeam/Scriptlets/blob/master/wiki/about-scriptlets#log-on-stack-trace" target="_blank" rel="noopener noreferrer"><code>log-on-stack-trace</code></a></li><li><a href="https://github.com/AdguardTeam/Scriptlets/blob/master/wiki/about-scriptlets#log-eval" target="_blank" rel="noopener noreferrer"><code>log-eval</code></a></li><li><a href="https://github.com/AdguardTeam/Scriptlets/blob/master/wiki/about-scriptlets#log" target="_blank" rel="noopener noreferrer"><code>log</code></a></li></ul><p>The following scriptlets also may be used for debug purposes:</p><ul><li><a href="https://github.com/AdguardTeam/Scriptlets/blob/master/wiki/about-scriptlets#json-prune" target="_blank" rel="noopener noreferrer"><code>json-prune</code></a></li><li><a href="https://github.com/AdguardTeam/Scriptlets/blob/master/wiki/about-scriptlets#prevent-fetch" target="_blank" rel="noopener noreferrer"><code>prevent-fetch</code></a></li><li><a href="https://github.com/AdguardTeam/Scriptlets/blob/master/wiki/about-scriptlets#prevent-requestanimationframe" target="_blank" rel="noopener noreferrer"><code>prevent-requestAnimationFrame</code></a></li><li><a href="https://github.com/AdguardTeam/Scriptlets/blob/master/wiki/about-scriptlets#prevent-setinterval" target="_blank" rel="noopener noreferrer"><code>prevent-setInterval</code></a></li><li><a href="https://github.com/AdguardTeam/Scriptlets/blob/master/wiki/about-scriptlets#prevent-settimeout" target="_blank" rel="noopener noreferrer"><code>prevent-setTimeout</code></a></li><li><a href="https://github.com/AdguardTeam/Scriptlets/blob/master/wiki/about-scriptlets#prevent-window-open" target="_blank" rel="noopener noreferrer"><code>prevent-window-open</code></a> with specified <code>replacement</code> parameter</li><li><a href="https://github.com/AdguardTeam/Scriptlets/blob/master/wiki/about-scriptlets#prevent-xhr" target="_blank" rel="noopener noreferrer"><code>prevent-xhr</code></a></li><li><a href="https://github.com/AdguardTeam/Scriptlets/blob/master/wiki/about-trusted-scriptlets#trusted-replace-fetch-response" target="_blank" rel="noopener noreferrer"><code>trusted-replace-fetch-response</code></a></li><li><a href="https://github.com/AdguardTeam/Scriptlets/blob/master/wiki/about-trusted-scriptlets#trusted-replace-xhr-response" target="_blank" rel="noopener noreferrer"><code>trusted-replace-xhr-response</code></a></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="good-luck-with-creating-filters">Good luck with creating filters!<a class="hash-link" href="#good-luck-with-creating-filters" title="Direktlink zur Überschrift">​</a></h2><p>We wish you luck with creating you own ad filters.</p><p>If you need an advice on how to create your own filters properly, our forum has a <a href="https://forum.adguard.com/index.php?forums/69/" target="_blank" rel="noopener noreferrer">special section</a> dedicated to writing your own filtering rules.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/AdguardTeam/KnowledgeBase/edit/master/docs/general/ad-filtering/create-own-filters.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Diese Seite bearbeiten</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Navigation der Dokumentseiten"><a class="pagination-nav__link pagination-nav__link--prev" href="/KnowledgeBase/de/general/ad-filtering/tracking-filter-statistics/"><div class="pagination-nav__sublabel">Vorherige</div><div class="pagination-nav__label">Tracking filter rules statistics</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/KnowledgeBase/de/general/ad-filtering/filter-policy/"><div class="pagination-nav__sublabel">Weitere</div><div class="pagination-nav__label">AdGuard filter policy</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#comments" class="table-of-contents__link toc-highlight">Comments</a></li><li><a href="#examples" class="table-of-contents__link toc-highlight">Examples</a></li><li><a href="#restrictions" class="table-of-contents__link toc-highlight">Restrictions</a></li><li><a href="#basic-rules" class="table-of-contents__link toc-highlight">Basic rules</a><ul><li><a href="#basic-rules-syntax" class="table-of-contents__link toc-highlight">Basic rules syntax</a></li><li><a href="#basic-rules-special-characters" class="table-of-contents__link toc-highlight">Special characters</a></li><li><a href="#regexp-support" class="table-of-contents__link toc-highlight">Regular expressions support</a></li><li><a href="#wildcard-for-tld" class="table-of-contents__link toc-highlight">Wildcard support for TLD (top-level domains)</a></li><li><a href="#basic-rules-examples" class="table-of-contents__link toc-highlight">Basic rules examples</a></li><li><a href="#basic-rules-modifiers" class="table-of-contents__link toc-highlight">Basic rules modifiers</a></li><li><a href="#advanced-capabilities" class="table-of-contents__link toc-highlight">Advanced capabilities</a></li></ul></li><li><a href="#cosmetic-rules" class="table-of-contents__link toc-highlight">Cosmetic rules</a><ul><li><a href="#cosmetic-elemhide-rules" class="table-of-contents__link toc-highlight">Element hiding rules</a></li><li><a href="#cosmetic-css-rules" class="table-of-contents__link toc-highlight">CSS rules</a></li><li><a href="#extended-css-selectors" class="table-of-contents__link toc-highlight">Extended CSS selectors</a></li><li><a href="#cosmetic-rules-priority" class="table-of-contents__link toc-highlight">Cosmetic rules priority</a></li></ul></li><li><a href="#html-filtering-rules" class="table-of-contents__link toc-highlight">HTML filtering rules</a></li><li><a href="#javascript-rules" class="table-of-contents__link toc-highlight">JavaScript rules</a></li><li><a href="#scriptlets" class="table-of-contents__link toc-highlight">Scriptlet rules</a><ul><li><a href="#trusted-scriptlets" class="table-of-contents__link toc-highlight">Trusted scriptlets</a></li></ul></li><li><a href="#modifiers-for-non-basic-type-of-rules" class="table-of-contents__link toc-highlight">Modifiers for non-basic type of rules</a></li><li><a href="#information-for-filters-maintainers" class="table-of-contents__link toc-highlight">Information for filters maintainers</a><ul><li><a href="#preprocessor-directives" class="table-of-contents__link toc-highlight">Preprocessor directives</a></li><li><a href="#hints" class="table-of-contents__link toc-highlight">Hints</a></li></ul></li><li><a href="#how-to-debug-filtering-rules" class="table-of-contents__link toc-highlight">How to debug filtering rules</a><ul><li><a href="#filtering-log" class="table-of-contents__link toc-highlight">Filtering log</a></li><li><a href="#selectors-debug-mode" class="table-of-contents__link toc-highlight">Selectors debugging mode</a></li><li><a href="#debug-scriptlets" class="table-of-contents__link toc-highlight">Debugging scriptlets</a></li></ul></li><li><a href="#good-luck-with-creating-filters" class="table-of-contents__link toc-highlight">Good luck with creating filters!</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">AdGuard</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://adguard.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Offizielle Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://adguard.com/contacts.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Über uns<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://adguard.com/press-releases.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Presse<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://adguard.com/media-materials.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Medienpakete<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://adguard.com/awards.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Auszeichnungen<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Produkte</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://adguard.com/adguard-windows/overview.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">AdGuard für Windows<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://adguard.com/adguard-android/overview.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">AdGuard für Android<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://adguard.com/adguard-mac/overview.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">AdGuard für Mac<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://adguard.com/adguard-ios/overview.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">AdGuard für iOS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://adguard.com/adguard-ios-pro/overview.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">AdGuard Pro für iOS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Support</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://adguard.com/support.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Support-Center<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/KnowledgeBase/de/general/ad-filtering/create-own-filters/">Wie Sie Ihre eigenen Anzeigenfilter erstellen</a></li><li class="footer__item"><a class="footer__link-item" href="/KnowledgeBase/de/general/ad-filtering/adguard-filters/">AdGuard-Anzeigenfilter</a></li><li class="footer__item"><a href="https://adguard.com/removal.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Anweisungen zum Entfernen<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/KnowledgeBase/de/general/userscripts/">Benutzerskripte</a></li></ul></div><div class="col footer__col"><div class="footer__title">Lizenz</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://adguard.com/license.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Lizenz kaufen<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/KnowledgeBase/de/general/license/what-is/">Lizenz wiederherstellen</a></li><li class="footer__item"><a href="https://adguard.com/terms-of-sale.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Verkaufsbedingungen<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://adguard.com/get-adguard-for-free.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Kostenlose Lizenz bekommen<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://adguard.com/contribute.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Zu AdGuard beitragen<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/KnowledgeBase/de/img/logo_dark.svg" alt="AdGuard" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/KnowledgeBase/de/img/logo_dark.svg" alt="AdGuard" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></div><div class="footer__copyright">© AdGuard, 2009–2022</div></div></div></footer></div>
<script src="/KnowledgeBase/de/assets/js/runtime~main.cc701fc0.js"></script>
<script src="/KnowledgeBase/de/assets/js/main.aaa174e5.js"></script>
</body>
</html>